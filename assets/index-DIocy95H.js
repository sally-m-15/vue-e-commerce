const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MainLayout-BwU53kM_.js","assets/@vue-D9mJ_Nj9.js","assets/vue-router-CuQBVdVw.js","assets/pinia-D55_AAlS.js","assets/axios-B9ygI19o.js","assets/vue3-toastify-62PFy-vF.js","assets/vue3-toastify-DHXAGmwn.css","assets/oh-vue-icons-jfJKEzKN.js","assets/@vercel-DNQiN_gI.js","assets/MainLayout-BTcRjW3s.css","assets/Login-BlJJmgLt.js","assets/vee-validate-DD1WZMgl.js","assets/useAuthSchema-DvksqVGb.js","assets/yup-Cd09XHOC.js","assets/property-expr-DwgEMw67.js","assets/tiny-case-Gl8mQWqo.js","assets/toposort-Dr983J65.js","assets/colornames-BQ62I0KG.js","assets/Register-De5q0Ru_.js","assets/ResetPassword-Bug5qXGp.js","assets/Home-cC_y92PL.js","assets/products-D_nF_M9r.js","assets/vue3-spinners-MCvIwUVe.js","assets/outdent-BxBVU389.js","assets/style-inject-BI9ztQJ7.js","assets/parse-unit-BKpLAx9Y.js","assets/just-range-CGHEN2gD.js","assets/ProductDetails-kNQ0TgJC.js","assets/vue3-carousel-DrHz4Tn2.js","assets/vue3-carousel-Dtdw2zcG.css","assets/wishlist-Cm-Gv_P3.js","assets/ProductDetails-CguuL2z5.css","assets/wishlist-CqNTFaWD.js","assets/Cart-LmNTFwlD.js","assets/action-BnPbsxqm.js","assets/Checkout-CmcJ-vaa.js","assets/Products-ZrLgfLV8.js","assets/Categories-CsP3q9f1.js","assets/categories-CDpmYi77.js","assets/SubCategories-AtX3k5A8.js","assets/Brands-C8i9eV3J.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/AllOrders-DUmqqYo7.js","assets/NotFound-GwKnNvl8.js","assets/NotFound-BYWY4d7O.css","assets/FileNotFound-BIvzBG7w.js"])))=>i.map(i=>d[i]);
import{r as d,z as V,a as B,c as H,d as M,o as N,S as U,H as x,I as G,R as $,P as j}from"./@vue-D9mJ_Nj9.js";import{u as k,c as J,a as z}from"./vue-router-CuQBVdVw.js";import{d as O,c as W}from"./pinia-D55_AAlS.js";import{a as K}from"./axios-B9ygI19o.js";import{l as T}from"./vue3-toastify-62PFy-vF.js";import{F as Q,a as X,b as Y,c as Z,d as ee,e as ae,f as te,g as re,h as se,i as oe,j as ne,k as ie,l as ue,m as ce,n as le,o as me,p as pe,q as de,r as he,s as fe,t as ge,u as _e,v as ve,w as Fe,x as ye,y as we,z as Ee,A as Se,B as Ae,C as Ie,D as Pe,E as Ce,G as Le,H as be,I as ke,J as Oe,K as Te,L as De,M as Re,N as qe,O as Ve,P as Be,Q as He,R as Me,S as Ne,T as Ue,U as xe,V as Ge,W as $e,X as je,Y as Je,Z as ze,_ as We,$ as Ke,a0 as Qe,a1 as Xe,a2 as Ye,a3 as Ze,a4 as ea,a5 as aa,a6 as ta,a7 as ra,a8 as sa,a9 as oa,aa as na,ab as ia,ac as ua}from"./oh-vue-icons-jfJKEzKN.js";import{i as ca}from"./@vercel-DNQiN_gI.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))u(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&u(n)}).observe(document,{childList:!0,subtree:!0});function r(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function u(e){if(e.ep)return;e.ep=!0;const o=r(e);fetch(e.href,o)}})();const C=localStorage.getItem("dark-mode"),v=d(C==="true"||!C&&window.matchMedia("(prefers-color-scheme: dark)").matches);function la(){v.value=!v.value}function ma(){return document.documentElement.classList.toggle("dark",v.value),V(()=>{document.documentElement.classList.toggle("dark",v.value),localStorage.setItem("dark-mode",v.value.toString())}),{dark:v,darkMode:la}}const pa=B([{id:"large-input",name:"name",type:"text",autocomplete:"name"},{id:"base-input",name:"email",type:"email",autocomplete:"email"},{id:"password-input",name:"password",type:"password",show:!1,autocomplete:"new-password"},{id:"rePassword-input",name:"rePassword",type:"password",show:!1,autocomplete:"new-password"},{id:"phone-input",name:"phone",type:"tel",autocomplete:"tel"}]);function La(){return{authData:pa}}async function L(a){const r=new TextEncoder().encode(a),u=await crypto.subtle.digest("SHA-256",r);return Array.from(new Uint8Array(u)).map(n=>n.toString(16).padStart(2,"0")).join("")}const g=K.create({baseURL:"https://ecommerce.routemisr.com/api/v1"}),w=a=>a&&a.includes("routemisr.com")?`https://wsrv.nl/?url=${a}&w=450&output=webp&q=80`:a;g.interceptors.request.use(a=>{const t=I();return!["/auth/signup","/auth/signin"].some(e=>a.url?.includes(e))&&t.token?a.headers.token=t.token:delete a.headers.token,a});g.interceptors.response.use(a=>{const t=a.data?.data;return t&&(Array.isArray(t)?t.forEach(r=>{r.imageCover&&(r.imageCover=w(r.imageCover)),r.image&&(r.image=w(r.image)),r.images&&(r.images=r.images.map(w))}):(t.imageCover&&(t.imageCover=w(t.imageCover)),t.images&&(t.images=t.images.map(w)))),a});function _(a){T(a.response?.data?.message||"Something went wrong")}const da=O("cart",()=>{const a=d(!1),t=d(!1),r=d(null),u=d(null),e=d(null),o=d([]),n=d(null),m=d(0),F=k();function p(){o.value=[],n.value=null,m.value=0,a.value=!1}async function c(i){if(!e.value){e.value=i;try{const f=await g.post("/cart",{productId:i});T(f.data.message,{theme:"colored",type:"success",dangerouslyHTMLString:!0}),await s()}catch(f){_(f)}finally{e.value=null}}}async function s(){o.value.length===0&&(a.value=!0);try{const i=await g.get("/cart");o.value=i.data.data.products,n.value=i.data.data,m.value=i.data.numOfCartItems}catch(i){_(i)}finally{a.value=!1}}async function h(i){if(!e.value){e.value=i;try{const f=await g.delete(`/cart/${i}`);await s()}catch(f){_(f)}finally{e.value=null}}}async function y(i,f,A){A==="plus"?r.value=i:u.value=i;try{const P=await g.put(`/cart/${i}`,{count:f});return await s(),f}catch(P){_(P)}finally{r.value=null,u.value=null}}async function S(){if(!t.value){t.value=!0;try{await g.delete("/cart"),await s()}catch(i){_(i)}finally{t.value=!1}}}function R(i){return n.value?.products.find(A=>A.product._id===i)?.count??0}function q(){F.push({name:"cart"})}return{cartItems:o,CartData:n,isLoading:a,isClearing:t,updatingPlusId:r,updatingMinusId:u,LoadingId:e,numOfCartItems:m,postCartItem:c,resetCart:p,getCartItems:s,deleteCartItems:h,updateCartItems:y,clearCart:S,getProductCount:R,goToCart:q}}),I=O("auth",()=>{const a=k(),t=d(""),r=d(""),u=d(!1),e=d(void 0),o=H(()=>!!r.value);async function n(c){t.value="",u.value=!0;try{const s=await g.post("/auth/signup",c),h=await L(c.phone),y=await L(c.password);localStorage.setItem("phone",h),localStorage.setItem("password",y),localStorage.setItem("token",s.data.token),localStorage.setItem("user",JSON.stringify(s.data.user)),e.value=s.data.user,r.value=s.data.token,a.push({name:"home"})}catch(s){s.response?.status===409&&(t.value=s.response?.data?.message||"This email is already registered.")}finally{u.value=!1}}async function m(c){t.value="",u.value=!0;try{const s=await g.post("/auth/signin",c);localStorage.setItem("token",s.data.token),localStorage.setItem("user",JSON.stringify(s.data.user)),r.value=s.data.token,e.value=s.data.user}catch(s){s.response?.status===401?t.value="This email is not registered. Please check and try again.":_(s)}finally{u.value=!1}}function F(){localStorage.getItem("token")&&(r.value=localStorage.getItem("token")),localStorage.getItem("user")&&(e.value=JSON.parse(localStorage.getItem("user")))}function p(){const c=da();r.value="",e.value=void 0,c.resetCart(),delete g.defaults.headers.token,localStorage.removeItem("token"),localStorage.removeItem("user"),a.push({name:"sign-in"})}return{status:t,token:r,isLoading:u,isloggedIn:o,user:e,registerUserValue:n,loginUserValue:m,getDataFromLocalStorage:F,logOut:p}}),ha={class:"min-h-screen bg-gray-50 dark:bg-gray-950"},fa=M({__name:"App",setup(a){const t=I();return N(()=>{t.getDataFromLocalStorage()}),ma(),(r,u)=>{const e=U("router-view");return G(),x("div",ha,[$(e,{class:"pt-24"})])}}}),ga="modulepreload",_a=function(a){return"/vue-e-commerce/"+a},b={},l=function(t,r,u){let e=Promise.resolve();if(r&&r.length>0){let F=function(p){return Promise.all(p.map(c=>Promise.resolve(c).then(s=>({status:"fulfilled",value:s}),s=>({status:"rejected",reason:s}))))};document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),m=n?.nonce||n?.getAttribute("nonce");e=F(r.map(p=>{if(p=_a(p),p in b)return;b[p]=!0;const c=p.endsWith(".css"),s=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${s}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":ga,c||(h.as="script"),h.crossOrigin="",h.href=p,m&&h.setAttribute("nonce",m),document.head.appendChild(h),c)return new Promise((y,S)=>{h.addEventListener("load",y),h.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${p}`)))})}))}function o(n){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=n,window.dispatchEvent(m),!m.defaultPrevented)throw n}return e.then(n=>{for(const m of n||[])m.status==="rejected"&&o(m.reason);return t().catch(o)})},va=[{path:"/",component:()=>l(()=>import("./MainLayout-BwU53kM_.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9])),redirect:{name:"sign-in"},children:[{path:"",name:"sign-in",component:()=>l(()=>import("./Login-BlJJmgLt.js"),__vite__mapDeps([10,11,1,12,13,14,15,16,17,2,3,4,5,6,7,8])),meta:{requiresAuth:!1}},{path:"sign-up",name:"sign-up",component:()=>l(()=>import("./Register-De5q0Ru_.js"),__vite__mapDeps([18,11,1,12,13,14,15,16,17,2,3,4,5,6,7,8])),meta:{requiresAuth:!1}},{path:"reset-password",name:"reset-password",component:()=>l(()=>import("./ResetPassword-Bug5qXGp.js"),__vite__mapDeps([19,11,1,2,12,13,14,15,16,17,3,4,5,6,7,8])),meta:{requiresAuth:!1}},{path:"home",name:"home",component:()=>l(()=>import("./Home-cC_y92PL.js"),__vite__mapDeps([20,1,21,3,22,23,24,17,25,26,2,4,5,6,7,8])),meta:{requiresAuth:!0}},{path:"productDetails/:id",name:"productDetails",meta:{requiresAuth:!0},component:()=>l(()=>import("./ProductDetails-kNQ0TgJC.js"),__vite__mapDeps([27,1,21,3,2,28,29,30,5,6,4,7,8,31]))},{path:"wishList",name:"wishList",meta:{requiresAuth:!0},component:()=>l(()=>import("./wishlist-CqNTFaWD.js"),__vite__mapDeps([32,30,3,1,5,6,22,23,24,17,25,26,2,4,7,8]))},{path:"cart",name:"cart",meta:{requiresAuth:!0},component:()=>l(()=>import("./Cart-LmNTFwlD.js"),__vite__mapDeps([33,34,2,1,22,23,24,17,25,26,3,4,5,6,7,8]))},{path:"checkout",name:"checkout",meta:{requiresAuth:!0},component:()=>l(()=>import("./Checkout-CmcJ-vaa.js"),__vite__mapDeps([35,1,11,13,14,15,16,17,34,2,3,4,5,6,7,8]))},{path:"products",name:"products",meta:{requiresAuth:!0},component:()=>l(()=>import("./Products-ZrLgfLV8.js"),__vite__mapDeps([36,1,21,3,2,4,5,6,7,8]))},{path:"categories",name:"categories",meta:{requiresAuth:!0},component:()=>l(()=>import("./Categories-CsP3q9f1.js"),__vite__mapDeps([37,38,3,1,21,2,4,5,6,7,8]))},{path:"subCategories/:id",name:"subCategories",meta:{requiresAuth:!0},component:()=>l(()=>import("./SubCategories-AtX3k5A8.js"),__vite__mapDeps([39,38,3,1,2,21,4,5,6,7,8]))},{path:"brands",name:"brands",meta:{requiresAuth:!0},component:()=>l(()=>import("./Brands-C8i9eV3J.js"),__vite__mapDeps([40,41,1]))}]},{path:"/allorder",name:"allorder",meta:{requiresAuth:!0},component:()=>l(()=>import("./AllOrders-DUmqqYo7.js"),__vite__mapDeps([42,34,2,1]))},{path:"/:notFound(.*)*",name:"notfound",meta:{requiresAuth:!0},component:()=>l(()=>import("./NotFound-GwKnNvl8.js"),__vite__mapDeps([43,41,1,44]))},{path:"/file-notfound",name:"file-notfound",meta:{requiresAuth:!0},component:()=>l(()=>import("./FileNotFound-BIvzBG7w.js"),__vite__mapDeps([45,41,1]))}],D=J({history:z("/vue-e-commerce/"),routes:va});D.beforeEach((a,t)=>{const r=I();if(a.meta.requiresAuth&&!r.isloggedIn)return{name:"sign-in"};if((a.name==="sign-in"||a.name==="sign-up")&&r.isloggedIn)return{name:"home"}});const Fa=[Q,X,Y,Z,ee,ae,te,re,se,oe,ne,ie,ue,ce,le,me,pe,de,he,fe,ge,_e,ve,Fe,ye,we,Ee,Se,Ae,Ie,Pe,Ce,Le,be,ke,Oe,Te,De,Re,qe,Ve,Be,He,Me,Ne,Ue,xe,Ge,$e,je,Je,ze,We,Ke,Qe,Xe,Ye,Ze,ea,aa,ta,ra,sa,oa,na],E=j(fa),ya=W();ca();ia(...Fa);E.component("v-icon",ua);E.use(D);E.use(ya);E.mount("#app");export{l as _,da as a,v as b,La as c,la as d,g as e,_ as f,L as h,I as u};
