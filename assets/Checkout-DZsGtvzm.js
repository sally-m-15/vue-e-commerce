import{a as B,d as q,c as F,H as u,I as l,L as a,J as k,K as w,v as o,R as y,U as _,X as c,r as N,w as T,Y as E,T as C,V as v}from"./@vue-D9mJ_Nj9.js";import{a as $,F as S,E as Q}from"./vee-validate-DD1WZMgl.js";import{c as G,a as g}from"./yup-Cd09XHOC.js";import{a as K,e as A,f as M}from"./index-wmf9UdPx.js";import{u as H}from"./action-BnPbsxqm.js";import{d as j}from"./pinia-D55_AAlS.js";import{u as R}from"./vue-router-CuQBVdVw.js";import"./property-expr-DwgEMw67.js";import"./tiny-case-Gl8mQWqo.js";import"./toposort-Dr983J65.js";import"./colornames-BQ62I0KG.js";import"./axios-B9ygI19o.js";import"./vue3-toastify-62PFy-vF.js";import"./oh-vue-icons-jfJKEzKN.js";import"./vue3-carousel-DrHz4Tn2.js";import"./@vercel-DNQiN_gI.js";const f=B([{id:"address",name:"address",type:"text"},{id:"country",name:"country",type:"select",options:[]},{id:"city",name:"city",type:"select",options:[]},{id:"details",name:"details",type:"text"},{id:"phone",name:"phone",type:"tel"}]),D={cairo:["Nasr City","Heliopolis","New Cairo","Maadi","Zamalek","Downtown","Garden City","Mokattam","Shubra","Ain Shams","El Marg","El Salam","Helwan","15th of May","Badr City","El Sherouk"],giza:["Dokki","Mohandessin","Haram","Faisal","Sheikh Zayed","6th of October","Imbaba","Kerdasa","Badrashein","Al Ayyat","Al Saf","Atfih"],alexandria:["Smouha","Stanley","Gleem","Sidi Gaber","Miami","Mandara","Borg El Arab","Agami","Raml","Moharam Bek"],behaira:["Damanhour","Kafr El-Dawar","Rashid","Edku","Abu El-Matamir","Hosh Issa","Kom Hamada","Delengat"],gharbiya:["Tanta","El Mahalla El Kubra","Kafr El-Zayat","Zefta","Samanoud"],dakahlia:["Mansoura","Talkha","Mit Ghamr","Dekernes","Aga","Manzala","Belqas","Sherbin"],sharqia:["Zagazig","10th of Ramadan","Belbeis","Minya El-Qamh","Abu Hammad","Faqous","Hihya"],monofia:["Shebin El-Kom","Sadat City","Menouf","Ashmoun","Quesna","Berket El-Sabaa"],kafr_el_sheikh:["Kafr El-Sheikh","Desouk","Baltim","Fuwwah","Metoubes","Sidi Salem"],qalyubia:["Banha","Qalyub","Shubra El-Kheima","El Khanka","Toukh","Shebeen El-Qanater"],ismailia:["Ismailia","Fayed","Qantara East","Qantara West","Abu Suweir","Tell El-Kebir"],suez:["Suez","Arbaeen","Ataqa"],port_said:["Port Said","Port Fouad"],damietta:["Damietta City","New Damietta","Ras El-Bar","Faraskur","Kafr Saad","Zarqa"],fayoum:["Fayoum City","Senoures","Etsa","Tamiya","Youssef El-Seddik"],bani_sweif:["Bani Sweif City","El Wasta","Nasser","Biba","Ihnasia"],minya:["Minya City","New Minya","Mallawi","Samalut","Maghagha","Abu Qurqas"],assiut:["Assiut City","Dairut","Manfalut","Qusiya","Abnub","Abu Tig"],sohag:["Sohag City","Akhmim","Girga","Tahta","Dar El-Salam","El Maragha"],qena:["Qena City","Nag Hammadi","Qus","Farshout","Abu Tesht"],luxor:["Luxor City","Armant","Esna","New Luxor"],aswan:["Aswan City","Kom Ombo","Edfu","Daraw","Abu Simbel"],red_sea:["Hurghada","El Gouna","Safaga","Marsa Alam","Quseir"],matrouh:["Marsa Matrouh","El Alamein","Siwa","Sallum","El Dabaa"],north_sinai:["Arish","Sheikh Zuweid","Rafah","Bir El-Abd"],south_sinai:["Sharm El-Sheikh","Dahab","Nuweiba","Taba","Saint Catherine","Ras Sedr"],new_valley:["Kharga","Dakhla","Farafra","Balat"]},V=G({country:g().required("country is required"),city:g().required("city is required"),address:g().required("address is required"),phone:g().required("phone is riquired")}),z={class:"md:px-12 py-10 flex flex-col items-center md:items-start"},I={class:"flex flex-col md:flex-row md:gap-0"},P={class:"flex items-center text-center md:text-start flex-col gap-5 md:flex-row max-xl:justify-center"},Z={class:"w-[80px] h-[80px] shrink-0"},O=["src","alt"],L={class:"font-semibold text-sm dark:text-white leading-8 text-black line-clamp-1"},U={class:"text-sm dark:text-white"},W={class:"font-normal dark:text-gray-300 text-lg leading-8 text-gray-500 my-2"},Y={class:"text-green-600 text-sm"},J={class:"flex flex-col lg:items-center mt-10 lg:w-full items-center md:items-start"},X={class:"mt-5 md:mt-10 text-sm text-gray-500 font-medium flex flex-col gap-4 lg:w-96"},aa={class:"flex justify-between"},ea={class:"flex justify-between"},ta={class:"text-green-600"},ra=q({__name:"CartCheckout",setup(x){const{goToProducts:n}=H(),m=K(),h=F(()=>(m.CartData?.totalCartPrice??0)+5-10);return(r,e)=>(l(),u("div",z,[(l(!0),u(k,null,w(o(m).cartItems,s=>(l(),u("div",{key:s._id},[a("div",I,[a("div",P,[a("div",Z,[a("img",{src:s.product?.imageCover,loading:"lazy",alt:s.product.title,class:"h-full w-full rounded-xl object-cover aspect-square",height:"80",width:"80",decoding:"async"},null,8,O)]),a("div",null,[a("h6",L,c(s.product?.title),1),a("h6",U,c(s.count)+" x",1),a("p",W,[a("span",Y,c(s.price)+" EGp",1)])])])])]))),128)),a("div",J,[y(o($),null,{default:_(()=>[y(o(S),{name:"code",type:"text",placeholder:" Discount code",class:"ps-3 lg:w-96 py-1 text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"})]),_:1}),a("div",X,[a("span",aa,[e[1]||(e[1]=a("h6",null,"Subtotal",-1)),a("h6",null,c(o(m).CartData?.totalCartPrice),1)]),e[3]||(e[3]=a("span",{class:"flex justify-between"},[a("h6",null,"Shipping"),a("h6",null,"5 EGp")],-1)),e[4]||(e[4]=a("span",{class:"flex justify-between"},[a("h6",null,"Discount"),a("h6",null,"- 10 EGp")],-1)),a("span",ea,[e[2]||(e[2]=a("h6",{class:"text-black dark:text-white"},"Total",-1)),a("h6",ta,c(h.value)+" EGp",1)])])]),a("button",{onClick:e[0]||(e[0]=(...s)=>o(n)&&o(n)(...s)),class:"text-white mt-20 text-xs sm:px-10 cursor-pointer bg-green-600 rounded-md py-2 px-4 xl:text-xl xl:px-20 block mx-auto hover:bg-green-700"}," Continue Shopping ")]))}}),sa=j("checkout",()=>{const x=K(),n=F(()=>x.CartData?._id);async function m(r){try{if(!n.value)return;const e=await A.post(`/orders/${n.value}`,{shippingAddress:{details:r.details,city:r.city,phone:r.phone}})}catch(e){M(e)}}async function h(r){try{const e=window.location.origin;if(!n.value)return;const s=await A.post(`/orders/checkout-session/${n.value}?url=${e}`,{shippingAddress:{details:r.details,city:r.city,phone:r.phone,address:r.address,country:r.country}});location.href=s.data.session.url}catch(e){M(e)}}return{cashOrder:m,onlinCheckout:h}}),oa={class:"py-28 flex flex-col md:flex-row gap-10 md:gap-0"},ia={class:"md:w-3/5 order-2 md:order-1 flex flex-col mx-10 border-t md:border-t-0 py-10 border-gray-300"},na=["for"],la={value:"",disabled:"",selected:""},da=["value"],ua={class:"flex justify-center mt-10 gap-16 font-bold dark:text-white"},ca={class:"md:border-l md:w-2/5 order-1 md:order-2 border-gray-300 bg-gray-100 dark:bg-gray-950"},Ma=q({__name:"Checkout",setup(x){const n=sa(),m=R(),h=N("cash"),r=B({country:"",address:"",city:"",details:"",phone:""}),e=f.find(d=>d.id==="country");e&&(e.options=Object.keys(D)),T(()=>r.country,d=>{const i=f.find(b=>b.id==="city");i&&(i.options=d?D[d]:[],r.city="")});async function s(d){h.value==="cash"?(await n.cashOrder(d),m.push({name:"allorder"})):await n.onlinCheckout(d)}return(d,i)=>(l(),u("div",oa,[a("section",ia,[i[2]||(i[2]=a("h2",{class:"text-center text-3xl font-bold mb-10 dark:text-white"}," checkout ",-1)),i[3]||(i[3]=a("p",{class:"text-xl font-medium pb-4 dark:text-white"}," Shopping information ",-1)),y(o($),{onSubmit:s,"validation-schema":o(V)},{default:_(({meta:b})=>[(l(!0),u(k,null,w(o(f),t=>(l(),u("div",{key:t.id,class:"flex flex-col"},[a("label",{for:t.id,class:"text-lg py-5 font-light text-gray-900 dark:text-white pb-2"},c(t.name),9,na),t.type!=="select"?(l(),E(o(S),{key:0,name:t.name,type:t.type,id:t.id,class:"w-full py-2 text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},null,8,["name","type","id"])):C("",!0),t.type==="select"?(l(),E(o(S),{key:1,as:"select",name:t.name,id:t.id,modelValue:r[t.id],"onUpdate:modelValue":p=>r[t.id]=p,disabled:t.id==="city"&&!r.country,class:"w-full py-2 px-3 text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 appearance-none"},{default:_(()=>[a("option",la,c(t.id==="city"&&!r.country?"Select country first":`Select ${t.name}`),1),(l(!0),u(k,null,w(t.options,p=>(l(),u("option",{key:p,value:p},c(p),9,da))),128))]),_:2},1032,["name","id","modelValue","onUpdate:modelValue","disabled"])):C("",!0),y(o(Q),{name:t.name,class:"bg-red-300 text-red-600 p-3 mt-1 rounded-lg"},null,8,["name"])]))),128)),a("div",ua,[a("button",{type:"submit",onClick:i[0]||(i[0]=t=>h.value="cash"),class:v([b.valid?"bg-green-600 hover:bg-green-800 text-white border-0":"bg-white","px-4 text-xs cursor-pointer text-gray-500 border md:text-xl sm:px-10 rounded-xl py-2 xl:px-20"])}," Pay Cash ",2),a("button",{onClick:i[1]||(i[1]=t=>h.value="online"),class:v([b.valid?"bg-green-600 hover:bg-green-800 text-white border-0":"bg-white","text-gray-500 cursor-pointer border md:text-xl px-4 sm:px-10 text-xs rounded-xl py-2 xl:px-20"]),type:"submit"}," Pay Now ",2)])]),_:1},8,["validation-schema"])]),a("section",ca,[y(ra)])]))}});export{Ma as default};
