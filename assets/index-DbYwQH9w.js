const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MainLayout-CaMcPaqO.js","assets/@vue-gREzKE0s.js","assets/vue-router-CYWy9yhr.js","assets/pinia-fFjxw1xj.js","assets/axios-B9ygI19o.js","assets/vue3-toastify-DNfa5qGy.js","assets/vue3-toastify-DHXAGmwn.css","assets/oh-vue-icons-BuRQbSDy.js","assets/vue3-carousel-BEfR35kf.js","assets/vue3-carousel-Dtdw2zcG.css","assets/@vercel-DNQiN_gI.js","assets/MainLayout-D_7vufNi.css","assets/Login-QF_j6G_K.js","assets/vee-validate-eTBMEHD0.js","assets/useAuthSchema-CWLpw39i.js","assets/yup-Cd09XHOC.js","assets/property-expr-DwgEMw67.js","assets/tiny-case-Gl8mQWqo.js","assets/toposort-Dr983J65.js","assets/colornames-BQ62I0KG.js","assets/LoadingSpinner.vue_vue_type_script_setup_true_lang-CCYrNpN3.js","assets/vue3-spinners-CNlpzWdy.js","assets/outdent-BxBVU389.js","assets/style-inject-BI9ztQJ7.js","assets/parse-unit-BKpLAx9Y.js","assets/just-range-CGHEN2gD.js","assets/Register-LGOhbmes.js","assets/ResetPassword-BZQ80LWt.js","assets/Home-CYvKWlSA.js","assets/SearchBar.vue_vue_type_script_setup_true_lang-BIRvCHnJ.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/SearchBar-B_2jvXgZ.css","assets/Home-CguuL2z5.css","assets/ProductDetails-DM8E3z8K.js","assets/wishlist-Cn8mwt6j.js","assets/wishlist-BLQV2Zl9.css","assets/Cart-BUj8Q1KS.js","assets/action-DUKE3L6d.js","assets/Cart-uabUb0qG.css","assets/Checkout-D_MVWkiA.js","assets/Checkout-CywIGlNq.css","assets/Products-bwEvZ4JG.js","assets/Categories-C11ozIdD.js","assets/CategorieCard-CeEDV_UE.js","assets/Brands-BUmSYwDi.js","assets/AllOrders-Cjv0OjnG.js","assets/NotFound-CEDFSZh-.js","assets/NotFound-Bq64ms4N.css","assets/FileNotFound-C20eSQSq.js"])))=>i.map(i=>d[i]);
import{r as _,z as R,a as T,c as b,d as q,o as C,S as V,H as F,I as N,R as H,P as M}from"./@vue-gREzKE0s.js";import{u as L,c as x,a as U}from"./vue-router-CYWy9yhr.js";import{d as k,c as j}from"./pinia-fFjxw1xj.js";import{a as B}from"./axios-B9ygI19o.js";import{l as O}from"./vue3-toastify-DNfa5qGy.js";import{c as $,g as J,F as W,a as z,b as G,d as K,e as Q,f as X,h as Y,i as Z,j as ee,k as te}from"./oh-vue-icons-BuRQbSDy.js";import"./vue3-carousel-BEfR35kf.js";import{i as ae}from"./@vercel-DNQiN_gI.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))u(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&u(i)}).observe(document,{childList:!0,subtree:!0});function a(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function u(t){if(t.ep)return;t.ep=!0;const n=a(t);fetch(t.href,n)}})();const I=localStorage.getItem("dark-mode"),v=_(I==="true"||!I&&window.matchMedia("(prefers-color-scheme: dark)").matches);function re(){v.value=!v.value}function oe(){return document.documentElement.classList.toggle("dark",v.value),R(()=>{document.documentElement.classList.toggle("dark",v.value),localStorage.setItem("dark-mode",v.value.toString())}),{dark:v,darkMode:re}}const ne=T([{id:"large-input",name:"name",type:"text",autocomplete:"name"},{id:"base-input",name:"email",type:"email",autocomplete:"email"},{id:"password-input",name:"password",type:"password",show:!1,autocomplete:"new-password"},{id:"rePassword-input",name:"rePassword",type:"password",show:!1,autocomplete:"new-password"},{id:"phone-input",name:"phone",type:"tel",autocomplete:"tel"}]);function we(){return{authData:ne}}async function S(e){const a=new TextEncoder().encode(e),u=await crypto.subtle.digest("SHA-256",a);return Array.from(new Uint8Array(u)).map(i=>i.toString(16).padStart(2,"0")).join("")}const f=B.create({baseURL:"https://ecommerce.routemisr.com/api/v1"});f.interceptors.request.use(e=>{const o=A();return!["/auth/signup","/auth/signin"].some(t=>e.url?.includes(t))&&o.token?e.headers.token=o.token:delete e.headers.token,e});function g(e){O(e.response?.data?.message||"Something went wrong")}const se=k("cart",()=>{const e=_(!1),o=_([]),a=_(null),u=_(0),t=L();function n(){o.value=[],a.value=null,u.value=0,e.value=!1}async function i(s){if(!e.value){e.value=!0;try{const p=await f.post("/cart",{productId:s});O(p.data.message,{theme:"colored",type:"success",dangerouslyHTMLString:!0}),await c()}catch(p){g(p)}finally{e.value=!1}}}async function c(){e.value=!0;try{const s=await f.get("/cart");o.value=s.data.data.products,a.value=s.data.data,u.value=s.data.numOfCartItems}catch(s){g(s)}finally{e.value=!1}}async function y(s){if(!e.value){e.value=!0;try{const p=await f.delete(`/cart/${s}`);await c()}catch(p){g(p)}finally{e.value=!1}}}async function d(s,p){if(!e.value&&!(p<1)){e.value=!0;try{const E=await f.put(`/cart/${s}`,{count:p});return await c(),p}catch(E){g(E)}finally{e.value=!1}}}async function l(){if(!e.value){e.value=!0;try{await f.delete("/cart"),await c()}catch(s){g(s)}finally{e.value=!1}}}function r(s){return a.value?.products.find(E=>E.product._id===s)?.count??0}function h(){t.push({name:"cart"})}return{cartItems:o,CartData:a,isLoading:e,numOfCartItems:u,postCartItem:i,resetCart:n,getCartItems:c,deleteCartItems:y,updateCartItems:d,clearCart:l,getProductCount:r,goToCart:h}}),A=k("auth",()=>{const e=L(),o=_(""),a=_(""),u=_(!1),t=_(void 0),n=b(()=>!!a.value);async function i(l){o.value="",u.value=!0;try{const r=await f.post("/auth/signup",l),h=await S(l.phone),s=await S(l.password);localStorage.setItem("phone",h),localStorage.setItem("password",s),localStorage.setItem("token",r.data.token),localStorage.setItem("user",JSON.stringify(r.data.user)),t.value=r.data.user,a.value=r.data.token,e.push({name:"home"})}catch(r){r.response?.status===409&&(o.value=r.response?.data?.message||"This email is already registered.")}finally{u.value=!1}}async function c(l){o.value="",u.value=!0;try{const r=await f.post("/auth/signin",l);localStorage.setItem("token",r.data.token),localStorage.setItem("user",JSON.stringify(r.data.user)),a.value=r.data.token,t.value=r.data.user}catch(r){r.response?.status===401?o.value="This email is not registered. Please check and try again.":g(r)}finally{u.value=!1}}function y(){localStorage.getItem("token")&&(a.value=localStorage.getItem("token")),localStorage.getItem("user")&&(t.value=JSON.parse(localStorage.getItem("user")))}function d(){const l=se();a.value="",t.value=void 0,l.resetCart(),delete f.defaults.headers.token,localStorage.removeItem("token"),localStorage.removeItem("user"),e.push({name:"sign-in"})}return{status:o,token:a,isLoading:u,isloggedIn:n,user:t,registerUserValue:i,loginUserValue:c,getDataFromLocalStorage:y,logOut:d}}),ue={class:"min-h-screen bg-gray-50 dark:bg-gray-950"},ie=q({__name:"App",setup(e){const o=A();return C(()=>{o.getDataFromLocalStorage()}),oe(),(a,u)=>{const t=V("router-view");return N(),F("div",ue,[H(t,{class:"pt-24"})])}}}),ce="modulepreload",le=function(e){return"/vue-e-commerce/"+e},P={},m=function(o,a,u){let t=Promise.resolve();if(a&&a.length>0){let y=function(d){return Promise.all(d.map(l=>Promise.resolve(l).then(r=>({status:"fulfilled",value:r}),r=>({status:"rejected",reason:r}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),c=i?.nonce||i?.getAttribute("nonce");t=y(a.map(d=>{if(d=le(d),d in P)return;P[d]=!0;const l=d.endsWith(".css"),r=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${r}`))return;const h=document.createElement("link");if(h.rel=l?"stylesheet":ce,l||(h.as="script"),h.crossOrigin="",h.href=d,c&&h.setAttribute("nonce",c),document.head.appendChild(h),l)return new Promise((s,p)=>{h.addEventListener("load",s),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${d}`)))})}))}function n(i){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=i,window.dispatchEvent(c),!c.defaultPrevented)throw i}return t.then(i=>{for(const c of i||[])c.status==="rejected"&&n(c.reason);return o().catch(n)})},me=[{path:"/",component:()=>m(()=>import("./MainLayout-CaMcPaqO.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11])),redirect:{name:"sign-in"},children:[{path:"",name:"sign-in",component:()=>m(()=>import("./Login-QF_j6G_K.js"),__vite__mapDeps([12,13,1,14,15,16,17,18,19,20,3,5,6,21,22,23,24,25,2,4,7,8,9,10])),meta:{requiresAuth:!1}},{path:"sign-up",name:"sign-up",component:()=>m(()=>import("./Register-LGOhbmes.js"),__vite__mapDeps([26,13,1,14,15,16,17,18,19,20,3,5,6,21,22,23,24,25,2,4,7,8,9,10])),meta:{requiresAuth:!1}},{path:"reset-password",name:"reset-password",component:()=>m(()=>import("./ResetPassword-BZQ80LWt.js"),__vite__mapDeps([27,13,1,2,14,15,16,17,18,19,3,4,5,6,7,8,9,10])),meta:{requiresAuth:!1}},{path:"home",name:"home",component:()=>m(()=>import("./Home-CYvKWlSA.js"),__vite__mapDeps([28,29,1,20,3,5,6,21,22,23,19,24,25,2,30,13,31,8,9,4,7,10,32])),meta:{requiresAuth:!0}},{path:"productDetails/:id",name:"productDetails",meta:{requiresAuth:!0},component:()=>m(()=>import("./ProductDetails-DM8E3z8K.js"),__vite__mapDeps([33,1,20,3,5,6,21,22,23,19,24,25,2,8,9,4,7,10,32]))},{path:"wishList",name:"wishList",meta:{requiresAuth:!0},component:()=>m(()=>import("./wishlist-Cn8mwt6j.js"),__vite__mapDeps([34,20,3,1,5,6,21,22,23,19,24,25,30,2,4,7,8,9,10,35]))},{path:"cart",name:"cart",meta:{requiresAuth:!0},component:()=>m(()=>import("./Cart-BUj8Q1KS.js"),__vite__mapDeps([36,20,3,1,5,6,21,22,23,19,24,25,37,2,30,4,7,8,9,10,38]))},{path:"checkout",name:"checkout",meta:{requiresAuth:!0},component:()=>m(()=>import("./Checkout-D_MVWkiA.js"),__vite__mapDeps([39,1,13,15,16,17,18,19,37,2,30,3,4,5,6,7,8,9,10,40]))},{path:"products",name:"products",meta:{requiresAuth:!0},component:()=>m(()=>import("./Products-bwEvZ4JG.js"),__vite__mapDeps([41,29,1,20,3,5,6,21,22,23,19,24,25,2,30,13,31,4,7,8,9,10]))},{path:"categories",name:"categories",meta:{requiresAuth:!0},component:()=>m(()=>import("./Categories-C11ozIdD.js"),__vite__mapDeps([42,30,1])),children:[{path:"categoriecard",name:"categoriecard",meta:{requiresAuth:!0},component:()=>m(()=>import("./CategorieCard-CeEDV_UE.js"),__vite__mapDeps([43,30,1]))}]},{path:"brands",name:"brands",meta:{requiresAuth:!0},component:()=>m(()=>import("./Brands-BUmSYwDi.js"),__vite__mapDeps([44,30,1]))}]},{path:"/allorder",name:"allorder",meta:{requiresAuth:!0},component:()=>m(()=>import("./AllOrders-Cjv0OjnG.js"),__vite__mapDeps([45,37,2,1]))},{path:"/:notFound(.*)*",name:"notfound",meta:{requiresAuth:!0},component:()=>m(()=>import("./NotFound-CEDFSZh-.js"),__vite__mapDeps([46,30,1,47]))},{path:"/file-notfound",name:"file-notfound",meta:{requiresAuth:!0},component:()=>m(()=>import("./FileNotFound-C20eSQSq.js"),__vite__mapDeps([48,30,1]))}],D=x({history:U("/vue-e-commerce/"),routes:me});D.beforeEach((e,o)=>{const a=A();if(e.meta.requiresAuth&&!a.isloggedIn)return{name:"sign-in"};if((e.name==="sign-in"||e.name==="sign-up")&&a.isloggedIn)return{name:"home"}});const w=M(ie),de=j();ae();$(te,ee,Z,Y,X,Q,K,G,z,W);w.component("v-icon",J);w.use(D);w.use(de);w.mount("#app");export{se as a,v as b,we as c,re as d,f as e,g as f,S as h,A as u};
