import{J as q,d as F,B as $,s as K,c as u,b as l,f as e,F as k,g as _,h as o,e as y,w,t as c,v as G,x as E,y as v,m as Q,p as T,G as H,r as j,q as A,i as M,n as D}from"./index-yv5lShvE.js";import{a as N,F as S,E as z}from"./vee-validate-CTwaBm9p.js";import{c as I,a as b}from"./index.esm-npaVDFqd.js";import{u as P}from"./action-Cq5vkyAZ.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./_commonjsHelpers-CqkleIqs.js";const f=q([{id:"address",name:"address",type:"text"},{id:"country",name:"country",type:"select",options:[]},{id:"city",name:"city",type:"select",options:[]},{id:"details",name:"details",type:"text"},{id:"phone",name:"phone",type:"tel"}]),B={cairo:["Nasr City","Heliopolis","New Cairo","Maadi","Zamalek","Downtown","Garden City","Mokattam","Shubra","Ain Shams","El Marg","El Salam","Helwan","15th of May","Badr City","El Sherouk"],giza:["Dokki","Mohandessin","Haram","Faisal","Sheikh Zayed","6th of October","Imbaba","Kerdasa","Badrashein","Al Ayyat","Al Saf","Atfih"],alexandria:["Smouha","Stanley","Gleem","Sidi Gaber","Miami","Mandara","Borg El Arab","Agami","Raml","Moharam Bek"],behaira:["Damanhour","Kafr El-Dawar","Rashid","Edku","Abu El-Matamir","Hosh Issa","Kom Hamada","Delengat"],gharbiya:["Tanta","El Mahalla El Kubra","Kafr El-Zayat","Zefta","Samanoud"],dakahlia:["Mansoura","Talkha","Mit Ghamr","Dekernes","Aga","Manzala","Belqas","Sherbin"],sharqia:["Zagazig","10th of Ramadan","Belbeis","Minya El-Qamh","Abu Hammad","Faqous","Hihya"],monofia:["Shebin El-Kom","Sadat City","Menouf","Ashmoun","Quesna","Berket El-Sabaa"],kafr_el_sheikh:["Kafr El-Sheikh","Desouk","Baltim","Fuwwah","Metoubes","Sidi Salem"],qalyubia:["Banha","Qalyub","Shubra El-Kheima","El Khanka","Toukh","Shebeen El-Qanater"],ismailia:["Ismailia","Fayed","Qantara East","Qantara West","Abu Suweir","Tell El-Kebir"],suez:["Suez","Arbaeen","Ataqa"],port_said:["Port Said","Port Fouad"],damietta:["Damietta City","New Damietta","Ras El-Bar","Faraskur","Kafr Saad","Zarqa"],fayoum:["Fayoum City","Senoures","Etsa","Tamiya","Youssef El-Seddik"],bani_sweif:["Bani Sweif City","El Wasta","Nasser","Biba","Ihnasia"],minya:["Minya City","New Minya","Mallawi","Samalut","Maghagha","Abu Qurqas"],assiut:["Assiut City","Dairut","Manfalut","Qusiya","Abnub","Abu Tig"],sohag:["Sohag City","Akhmim","Girga","Tahta","Dar El-Salam","El Maragha"],qena:["Qena City","Nag Hammadi","Qus","Farshout","Abu Tesht"],luxor:["Luxor City","Armant","Esna","New Luxor"],aswan:["Aswan City","Kom Ombo","Edfu","Daraw","Abu Simbel"],red_sea:["Hurghada","El Gouna","Safaga","Marsa Alam","Quseir"],matrouh:["Marsa Matrouh","El Alamein","Siwa","Sallum","El Dabaa"],north_sinai:["Arish","Sheikh Zuweid","Rafah","Bir El-Abd"],south_sinai:["Sharm El-Sheikh","Dahab","Nuweiba","Taba","Saint Catherine","Ras Sedr"],new_valley:["Kharga","Dakhla","Farafra","Balat"]},V=I({country:b().required("country is required"),city:b().required("city is required"),address:b().required("address is required"),phone:b().required("phone is riquired")}),Z={class:"md:px-12 py-10 flex flex-col items-center md:items-start"},O={class:"flex flex-col md:flex-row md:gap-0"},L={class:"flex items-center text-center md:text-start flex-col gap-5 md:flex-row max-xl:justify-center"},U={class:"img-box"},W=["src"],J={class:""},Y={class:"font-semibold text-sm dark:text-white leading-8 text-black line-clamp-1"},X={class:"text-sm dark:text-white"},ee={class:"font-normal dark:text-gray-300 text-lg leading-8 text-gray-500 my-2"},ae={class:"text-green-600 text-sm"},te={class:"flex flex-col lg:items-center mt-10 lg:w-full items-center md:items-start"},re={class:"mt-5 md:mt-10 text-sm text-gray-500 font-medium flex flex-col gap-4 lg:w-96"},se={class:"flex justify-between"},oe={class:"flex justify-between"},ie={class:"text-green-600"},ne=F({__name:"CartCheckout",setup(g){const{goToProducts:n}=P(),m=$(),h=K(()=>(m.CartData?.totalCartPrice??0)+5-10);return(r,a)=>(l(),u("div",Z,[(l(!0),u(k,null,_(o(m).cartItems,s=>(l(),u("div",{key:s._id},[e("div",O,[e("div",L,[e("div",U,[e("img",{src:s.product?.imageCover,loading:"lazy",alt:"item.title",class:"h-full w-full rounded-xl object-cover"},null,8,W)]),e("div",J,[e("h6",Y,c(s.product?.title),1),e("h6",X,c(s.count)+" x",1),e("p",ee,[e("span",ae,c(s.price)+" EGp",1)])])])])]))),128)),e("div",te,[y(o(N),null,{default:w(()=>[y(o(S),{name:"code",type:"text",placeholder:" Discount code",class:"ps-3 lg:w-96 py-1 text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"})]),_:1}),e("div",re,[e("span",se,[a[1]||(a[1]=e("h6",null,"Subtotal",-1)),e("h6",null,c(o(m).CartData?.totalCartPrice),1)]),a[3]||(a[3]=e("span",{class:"flex justify-between"},[e("h6",null,"Shipping"),e("h6",null,"5 EGp")],-1)),a[4]||(a[4]=e("span",{class:"flex justify-between"},[e("h6",null,"Discount"),e("h6",null,"- 10 EGp")],-1)),e("span",oe,[a[2]||(a[2]=e("h6",{class:"text-black dark:text-white"},"Total",-1)),e("h6",ie,c(h.value)+" EGp",1)])])]),e("button",{onClick:a[0]||(a[0]=(...s)=>o(n)&&o(n)(...s)),class:"text-white mt-20 text-xs sm:px-10 cursor-pointer bg-green-600 rounded-md py-2 px-4 xl:text-xl xl:px-20 block mx-auto hover:bg-green-700"}," Continue Shopping ")]))}}),le=R(ne,[["__scopeId","data-v-1f8e1787"]]),de=G("checkout",()=>{const g=$(),n=K(()=>g.CartData?._id);async function m(r){try{if(!n.value)return;const a=await E.post(`/orders/${n.value}`,{shippingAddress:{details:r.details,city:r.city,phone:r.phone}})}catch(a){v(a)}}async function h(r){try{const a=window.location.origin;if(!n.value)return;const s=await E.post(`/orders/checkout-session/${n.value}?url=${a}`,{shippingAddress:{details:r.details,city:r.city,phone:r.phone,address:r.address,country:r.country}});location.href=s.data.session.url}catch(a){v(a)}}return{cashOrder:m,onlinCheckout:h}}),ue={class:"min-h-screen relative"},ce={class:"py-28 flex flex-col md:flex-row gap-10 md:gap-0"},me={class:"md:w-3/5 order-2 md:order-1 flex flex-col mx-10 border-t md:border-t-0 py-10 border-gray-300"},he=["for"],ye={value:"",disabled:"",selected:""},pe=["value"],be={class:"flex justify-center mt-10 gap-16 font-bold dark:text-white"},ge={class:"md:border-l md:w-2/5 order-1 md:order-2 border-gray-300 bg-gray-100 dark:bg-gray-950"},Ce=F({__name:"Checkout",setup(g){const n=de(),m=Q(),h=T("cash"),r=q({country:"",address:"",city:"",details:"",phone:""}),a=f.find(d=>d.id==="country");a&&(a.options=Object.keys(B)),H(()=>r.country,d=>{const i=f.find(x=>x.id==="city");i&&(i.options=d?B[d]:[],r.city="")});async function s(d){h.value==="cash"?(await n.cashOrder(d),m.push({name:"allorder"})):await n.onlinCheckout(d)}return(d,i)=>{const x=j("LoadingSpinner");return l(),u("div",ue,[y(x),e("div",ce,[e("section",me,[i[2]||(i[2]=e("h2",{class:"text-center text-3xl font-bold mb-10 dark:text-white"}," checkout ",-1)),i[3]||(i[3]=e("p",{class:"text-xl font-medium pb-4 dark:text-white"}," Shopping information ",-1)),y(o(N),{onSubmit:s,"validation-schema":o(V)},{default:w(({meta:C})=>[(l(!0),u(k,null,_(o(f),t=>(l(),u("div",{key:t.id,class:"flex flex-col"},[e("label",{for:t.id,class:"text-lg py-5 font-light text-gray-900 dark:text-white pb-2"},c(t.name),9,he),t.type!=="select"?(l(),A(o(S),{key:0,name:t.name,type:t.type,id:t.id,class:"w-full py-2 text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},null,8,["name","type","id"])):M("",!0),t.type==="select"?(l(),A(o(S),{key:1,as:"select",name:t.name,id:t.id,modelValue:r[t.id],"onUpdate:modelValue":p=>r[t.id]=p,disabled:t.id==="city"&&!r.country,class:"w-full py-2 px-3 text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 appearance-none"},{default:w(()=>[e("option",ye,c(t.id==="city"&&!r.country?"Select country first":`Select ${t.name}`),1),(l(!0),u(k,null,_(t.options,p=>(l(),u("option",{key:p,value:p},c(p),9,pe))),128))]),_:2},1032,["name","id","modelValue","onUpdate:modelValue","disabled"])):M("",!0),y(o(z),{name:t.name,class:"bg-red-300 text-red-600 p-3 mt-1 rounded-lg"},null,8,["name"])]))),128)),e("div",be,[e("button",{type:"submit",onClick:i[0]||(i[0]=t=>h.value="cash"),class:D([C.valid?"bg-green-600 hover:bg-green-800 text-white border-0":"bg-white","px-4 text-xs cursor-pointer text-gray-500 border md:text-xl sm:px-10 rounded-xl py-2 xl:px-20"])}," Pay Cash ",2),e("button",{onClick:i[1]||(i[1]=t=>h.value="online"),class:D([C.valid?"bg-green-600 hover:bg-green-800 text-white border-0":"bg-white","text-gray-500 cursor-pointer border md:text-xl px-4 sm:px-10 text-xs rounded-xl py-2 xl:px-20"]),type:"submit"}," Pay Now ",2)])]),_:1},8,["validation-schema"])]),e("section",ge,[y(le)])])])}}});export{Ce as default};
