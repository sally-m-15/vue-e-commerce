const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MainLayout-BNpbzjOY.js","assets/@vue-gREzKE0s.js","assets/vue-router-CYWy9yhr.js","assets/pinia-fFjxw1xj.js","assets/axios-B9ygI19o.js","assets/vue3-toastify-DNfa5qGy.js","assets/vue3-toastify-DHXAGmwn.css","assets/oh-vue-icons-BuRQbSDy.js","assets/vue3-carousel-BEfR35kf.js","assets/vue3-carousel-Dtdw2zcG.css","assets/@vercel-DNQiN_gI.js","assets/MainLayout-D_7vufNi.css","assets/Login-D9lJ--EV.js","assets/vee-validate-eTBMEHD0.js","assets/useAuthSchema-CmuggkCL.js","assets/yup-Cd09XHOC.js","assets/property-expr-DwgEMw67.js","assets/tiny-case-Gl8mQWqo.js","assets/toposort-Dr983J65.js","assets/colornames-BQ62I0KG.js","assets/LoadingSpinner.vue_vue_type_script_setup_true_lang-ntZ6hxlL.js","assets/vue3-spinners-CNlpzWdy.js","assets/outdent-BxBVU389.js","assets/style-inject-BI9ztQJ7.js","assets/parse-unit-BKpLAx9Y.js","assets/just-range-CGHEN2gD.js","assets/Register-hku1cmjo.js","assets/ResetPassword-CNmQMlFX.js","assets/Home-Ytoz8Esg.js","assets/SearchBar.vue_vue_type_script_setup_true_lang-DeSbzWCJ.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/SearchBar-zkIi4hgi.css","assets/Home-CguuL2z5.css","assets/ProductDetails-Du7ORajn.js","assets/wishlist-DJpkWYOT.js","assets/wishlist-BLQV2Zl9.css","assets/Cart-Bp2rDAcK.js","assets/Cart-BB1BFo0b.css","assets/Checkout-K6RTwNbl.js","assets/action-DUKE3L6d.js","assets/Checkout-CywIGlNq.css","assets/Products-C1r4PJcK.js","assets/Categories-C11ozIdD.js","assets/CategorieCard-CeEDV_UE.js","assets/Brands-BUmSYwDi.js","assets/AllOrders-Cjv0OjnG.js","assets/NotFound-CEDFSZh-.js","assets/NotFound-Bq64ms4N.css","assets/FileNotFound-C20eSQSq.js"])))=>i.map(i=>d[i]);
import{r as h,z as k,a as D,c as R,d as T,o as b,S as q,H as V,I as C,R as F,P as N}from"./@vue-gREzKE0s.js";import{u as H,c as M,a as x}from"./vue-router-CYWy9yhr.js";import{d as S,c as U}from"./pinia-fFjxw1xj.js";import{a as j}from"./axios-B9ygI19o.js";import{l as L}from"./vue3-toastify-DNfa5qGy.js";import{c as B,g as $,F as J,a as W,b as z,d as G,e as K,f as Q,h as X,i as Y,j as Z,k as ee}from"./oh-vue-icons-BuRQbSDy.js";import"./vue3-carousel-BEfR35kf.js";import{i as te}from"./@vercel-DNQiN_gI.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const u of t)if(u.type==="childList")for(const n of u.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&i(n)}).observe(document,{childList:!0,subtree:!0});function s(t){const u={};return t.integrity&&(u.integrity=t.integrity),t.referrerPolicy&&(u.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?u.credentials="include":t.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(t){if(t.ep)return;t.ep=!0;const u=s(t);fetch(t.href,u)}})();const w=localStorage.getItem("dark-mode"),_=h(w==="true"||!w&&window.matchMedia("(prefers-color-scheme: dark)").matches);function ae(){_.value=!_.value}function re(){return document.documentElement.classList.toggle("dark",_.value),k(()=>{document.documentElement.classList.toggle("dark",_.value),localStorage.setItem("dark-mode",_.value.toString())}),{dark:_,darkMode:ae}}const oe=D([{id:"large-input",name:"name",type:"text",autocomplete:"name"},{id:"base-input",name:"email",type:"email",autocomplete:"email"},{id:"password-input",name:"password",type:"password",show:!1,autocomplete:"new-password"},{id:"rePassword-input",name:"rePassword",type:"password",show:!1,autocomplete:"new-password"},{id:"phone-input",name:"phone",type:"tel",autocomplete:"tel"}]);function Ee(){return{authData:oe}}async function A(e){const s=new TextEncoder().encode(e),i=await crypto.subtle.digest("SHA-256",s);return Array.from(new Uint8Array(i)).map(n=>n.toString(16).padStart(2,"0")).join("")}const p=j.create({baseURL:"https://ecommerce.routemisr.com/api/v1"});p.interceptors.request.use(e=>{const o=E();return!["/auth/signup","/auth/signin"].some(t=>e.url?.includes(t))&&o.token?e.headers.token=o.token:delete e.headers.token,e});function f(e){L(e.response?.data?.message||"Something went wrong")}const se=S("cart",()=>{const e=h(!1),o=h([]),s=h(null),i=h(0);function t(){o.value=[],s.value=null,i.value=0,e.value=!1}async function u(r){if(!e.value){e.value=!0;try{const a=await p.post("/cart",{productId:r});L(a.data.message,{theme:"colored",type:"success",dangerouslyHTMLString:!0}),await n()}catch(a){f(a)}finally{e.value=!1}}}async function n(){e.value=!0;try{const r=await p.get("/cart");o.value=r.data.data.products,s.value=r.data.data,i.value=r.data.numOfCartItems}catch(r){f(r)}finally{e.value=!1}}async function m(r){if(!e.value){e.value=!0;try{const a=await p.delete(`/cart/${r}`);await n()}catch(a){f(a)}finally{e.value=!1}}}async function g(r,a){if(!e.value&&!(a<1)){e.value=!0;try{const d=await p.put(`/cart/${r}`,{count:a});await n()}catch(d){f(d)}finally{e.value=!1}}}async function l(){if(!e.value){e.value=!0;try{await p.delete("/cart"),await n()}catch(r){f(r)}finally{e.value=!1}}}return{cartItems:o,CartData:s,isLoading:e,numOfCartItems:i,postCartItem:u,resetCart:t,getCartItems:n,deleteCartItems:m,updateCartItems:g,clearCart:l}}),E=S("auth",()=>{const e=H(),o=h(""),s=h(""),i=h(!1),t=h(void 0),u=R(()=>!!s.value);async function n(r){o.value="",i.value=!0;try{const a=await p.post("/auth/signup",r),d=await A(r.phone),y=await A(r.password);localStorage.setItem("phone",d),localStorage.setItem("password",y),localStorage.setItem("user",JSON.stringify(a.data.user)),t.value=a.data.user,e.push({name:"sign-in"})}catch(a){a.response?.status===409&&(o.value=a.response?.data?.message||"This email is already registered.")}finally{i.value=!1}}async function m(r){o.value="",i.value=!0;try{const a=await p.post("/auth/signin",r);localStorage.setItem("token",a.data.token),localStorage.setItem("user",JSON.stringify(a.data.user)),s.value=a.data.token,t.value=a.data.user}catch(a){a.response?.status===401?o.value="This email is not registered. Please check and try again.":f(a)}finally{i.value=!1}}function g(){localStorage.getItem("token")&&(s.value=localStorage.getItem("token")),localStorage.getItem("user")&&(t.value=JSON.parse(localStorage.getItem("user")))}function l(){const r=se();s.value="",t.value=void 0,r.resetCart(),delete p.defaults.headers.token,localStorage.removeItem("token"),localStorage.removeItem("user"),e.push({name:"sign-in"})}return{status:o,token:s,isLoading:i,isloggedIn:u,user:t,registerUserValue:n,loginUserValue:m,getDataFromLocalStorage:g,logOut:l}}),ne={class:"min-h-screen bg-gray-50 dark:bg-gray-950"},ue=T({__name:"App",setup(e){const o=E();return b(()=>{o.getDataFromLocalStorage()}),re(),(s,i)=>{const t=q("router-view");return C(),V("div",ne,[F(t,{class:"pt-24"})])}}}),ie="modulepreload",ce=function(e){return"/vue-e-commerce/"+e},I={},c=function(o,s,i){let t=Promise.resolve();if(s&&s.length>0){let g=function(l){return Promise.all(l.map(r=>Promise.resolve(r).then(a=>({status:"fulfilled",value:a}),a=>({status:"rejected",reason:a}))))};document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),m=n?.nonce||n?.getAttribute("nonce");t=g(s.map(l=>{if(l=ce(l),l in I)return;I[l]=!0;const r=l.endsWith(".css"),a=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${a}`))return;const d=document.createElement("link");if(d.rel=r?"stylesheet":ie,r||(d.as="script"),d.crossOrigin="",d.href=l,m&&d.setAttribute("nonce",m),document.head.appendChild(d),r)return new Promise((y,O)=>{d.addEventListener("load",y),d.addEventListener("error",()=>O(new Error(`Unable to preload CSS for ${l}`)))})}))}function u(n){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=n,window.dispatchEvent(m),!m.defaultPrevented)throw n}return t.then(n=>{for(const m of n||[])m.status==="rejected"&&u(m.reason);return o().catch(u)})},le=[{path:"/",component:()=>c(()=>import("./MainLayout-BNpbzjOY.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11])),redirect:{name:"sign-in"},children:[{path:"",name:"sign-in",component:()=>c(()=>import("./Login-D9lJ--EV.js"),__vite__mapDeps([12,13,1,14,15,16,17,18,19,20,3,5,6,21,22,23,24,25,2,4,7,8,9,10])),meta:{requiresAuth:!1}},{path:"sign-up",name:"sign-up",component:()=>c(()=>import("./Register-hku1cmjo.js"),__vite__mapDeps([26,13,1,14,15,16,17,18,19,20,3,5,6,21,22,23,24,25,2,4,7,8,9,10])),meta:{requiresAuth:!1}},{path:"reset-password",name:"reset-password",component:()=>c(()=>import("./ResetPassword-CNmQMlFX.js"),__vite__mapDeps([27,13,1,2,14,15,16,17,18,19,3,4,5,6,7,8,9,10])),meta:{requiresAuth:!1}},{path:"home",name:"home",component:()=>c(()=>import("./Home-Ytoz8Esg.js"),__vite__mapDeps([28,29,1,20,3,5,6,21,22,23,19,24,25,2,30,13,31,8,9,4,7,10,32])),meta:{requiresAuth:!0}},{path:"productDetails/:id",name:"productDetails",meta:{requiresAuth:!0},component:()=>c(()=>import("./ProductDetails-Du7ORajn.js"),__vite__mapDeps([33,1,20,3,5,6,21,22,23,19,24,25,2,8,9,4,7,10,32]))},{path:"wishList",name:"wishList",meta:{requiresAuth:!0},component:()=>c(()=>import("./wishlist-DJpkWYOT.js"),__vite__mapDeps([34,20,3,1,5,6,21,22,23,19,24,25,30,2,4,7,8,9,10,35]))},{path:"cart",name:"cart",meta:{requiresAuth:!0},component:()=>c(()=>import("./Cart-Bp2rDAcK.js"),__vite__mapDeps([36,20,3,1,5,6,21,22,23,19,24,25,2,30,4,7,8,9,10,37]))},{path:"checkout",name:"checkout",meta:{requiresAuth:!0},component:()=>c(()=>import("./Checkout-K6RTwNbl.js"),__vite__mapDeps([38,1,13,15,16,17,18,19,39,2,30,3,4,5,6,7,8,9,10,40]))},{path:"products",name:"products",meta:{requiresAuth:!0},component:()=>c(()=>import("./Products-C1r4PJcK.js"),__vite__mapDeps([41,29,1,20,3,5,6,21,22,23,19,24,25,2,30,13,31,4,7,8,9,10]))},{path:"categories",name:"categories",meta:{requiresAuth:!0},component:()=>c(()=>import("./Categories-C11ozIdD.js"),__vite__mapDeps([42,30,1])),children:[{path:"categoriecard",name:"categoriecard",meta:{requiresAuth:!0},component:()=>c(()=>import("./CategorieCard-CeEDV_UE.js"),__vite__mapDeps([43,30,1]))}]},{path:"brands",name:"brands",meta:{requiresAuth:!0},component:()=>c(()=>import("./Brands-BUmSYwDi.js"),__vite__mapDeps([44,30,1]))}]},{path:"/allorder",name:"allorder",meta:{requiresAuth:!0},component:()=>c(()=>import("./AllOrders-Cjv0OjnG.js"),__vite__mapDeps([45,39,2,1]))},{path:"/:notFound(.*)*",name:"notfound",meta:{requiresAuth:!0},component:()=>c(()=>import("./NotFound-CEDFSZh-.js"),__vite__mapDeps([46,30,1,47]))},{path:"/file-notfound",name:"file-notfound",meta:{requiresAuth:!0},component:()=>c(()=>import("./FileNotFound-C20eSQSq.js"),__vite__mapDeps([48,30,1]))}],P=M({history:x("/vue-e-commerce/"),routes:le});P.beforeEach((e,o)=>{const s=E();if(e.meta.requiresAuth&&!s.isloggedIn)return{name:"sign-in"};if((e.name==="sign-in"||e.name==="sign-up")&&s.isloggedIn)return{name:"home"}});const v=N(ue),me=U();te();B(ee,Z,Y,X,Q,K,G,z,W,J);v.component("v-icon",$);v.use(P);v.use(me);v.mount("#app");export{se as a,_ as b,Ee as c,ae as d,p as e,f,A as h,P as r,E as u};
