const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MainLayout-BGrg4JyG.js","assets/oh-vue-icons-AFsjrWki.js","assets/@vue-D9mJ_Nj9.js","assets/vue-router-CuQBVdVw.js","assets/pinia-D55_AAlS.js","assets/axios-B9ygI19o.js","assets/vue3-toastify-62PFy-vF.js","assets/vue3-toastify-DHXAGmwn.css","assets/@vercel-DNQiN_gI.js","assets/MainLayout-D_7vufNi.css","assets/Login-Ce0p3V1h.js","assets/vee-validate-DD1WZMgl.js","assets/useAuthSchema-C3er9K6R.js","assets/yup-Cd09XHOC.js","assets/property-expr-DwgEMw67.js","assets/tiny-case-Gl8mQWqo.js","assets/toposort-Dr983J65.js","assets/colornames-BQ62I0KG.js","assets/Register-DzkRSADf.js","assets/ResetPassword-B2EzMni4.js","assets/Home-B5llsPUj.js","assets/products-BT4iLlGY.js","assets/vue3-spinners-MCvIwUVe.js","assets/outdent-BxBVU389.js","assets/style-inject-BI9ztQJ7.js","assets/parse-unit-BKpLAx9Y.js","assets/just-range-CGHEN2gD.js","assets/ProductDetails-BdXvZl8a.js","assets/vue3-carousel-DrHz4Tn2.js","assets/vue3-carousel-Dtdw2zcG.css","assets/wishlist-BWcobg6k.js","assets/ProductDetails-CguuL2z5.css","assets/wishlist-Bv-6-Ddl.js","assets/Cart-BPCuYCat.js","assets/action-BnPbsxqm.js","assets/Checkout-CHw0JltW.js","assets/Products-DyeLkpmj.js","assets/Categories-CEl_3ell.js","assets/categories-CyHCAcqX.js","assets/SubCategories-Cr6WrRR9.js","assets/Brands-C8i9eV3J.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/AllOrders-BaPrvNev.js","assets/NotFound-DUeZ5j-y.js","assets/NotFound-BSaP4JqO.css","assets/FileNotFound-rk3uqIEt.js"])))=>i.map(i=>d[i]);
import{r as p,z as N,a as H,c as M,d as U,o as x,S as $,H as j,I as B,R as F,P as J}from"./@vue-D9mJ_Nj9.js";import{u as D,c as z,a as W}from"./vue-router-CuQBVdVw.js";import{d as b,c as K}from"./pinia-D55_AAlS.js";import{a as G}from"./axios-B9ygI19o.js";import{l as R}from"./vue3-toastify-62PFy-vF.js";import{g as Q}from"./oh-vue-icons-AFsjrWki.js";import{i as X}from"./@vercel-DNQiN_gI.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))u(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&u(s)}).observe(document,{childList:!0,subtree:!0});function r(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function u(e){if(e.ep)return;e.ep=!0;const n=r(e);fetch(e.href,n)}})();const O=localStorage.getItem("dark-mode"),v=p(O==="true"||!O&&window.matchMedia("(prefers-color-scheme: dark)").matches);function Y(){v.value=!v.value}function Z(){return document.documentElement.classList.toggle("dark",v.value),N(()=>{document.documentElement.classList.toggle("dark",v.value),localStorage.setItem("dark-mode",v.value.toString())}),{dark:v,darkMode:Y}}const ee=H([{id:"large-input",name:"name",type:"text",autocomplete:"name"},{id:"base-input",name:"email",type:"email",autocomplete:"email"},{id:"password-input",name:"password",type:"password",show:!1,autocomplete:"new-password"},{id:"rePassword-input",name:"rePassword",type:"password",show:!1,autocomplete:"new-password"},{id:"phone-input",name:"phone",type:"tel",autocomplete:"tel"}]);function he(){return{authData:ee}}async function k(t){const r=new TextEncoder().encode(t),u=await crypto.subtle.digest("SHA-256",r);return Array.from(new Uint8Array(u)).map(s=>s.toString(16).padStart(2,"0")).join("")}const g=G.create({baseURL:"https://ecommerce.routemisr.com/api/v1"}),E=t=>t&&t.includes("routemisr.com")?`https://wsrv.nl/?url=${t}&w=450&output=webp&q=80`:t;g.interceptors.request.use(t=>{const a=P();return!["/auth/signup","/auth/signin"].some(e=>t.url?.includes(e))&&a.token?t.headers.token=a.token:delete t.headers.token,t});g.interceptors.response.use(t=>{const a=t.data?.data;return a&&(Array.isArray(a)?a.forEach(r=>{r.imageCover&&(r.imageCover=E(r.imageCover)),r.image&&(r.image=E(r.image)),r.images&&(r.images=r.images.map(E))}):(a.imageCover&&(a.imageCover=E(a.imageCover)),a.images&&(a.images=a.images.map(E)))),t});function _(t){R(t.response?.data?.message||"Something went wrong")}const te=b("cart",()=>{const t=p(!1),a=p(!1),r=p(null),u=p(null),e=p(null),n=p([]),s=p(null),m=p(0),y=D();function d(){n.value=[],s.value=null,m.value=0,t.value=!1}async function c(i){if(!e.value){e.value=i;try{const h=await g.post("/cart",{productId:i});R(h.data.message,{theme:"colored",type:"success",dangerouslyHTMLString:!0}),await o()}catch(h){_(h)}finally{e.value=null}}}async function o(){n.value.length===0&&(t.value=!0);try{const i=await g.get("/cart");n.value=i.data.data.products,s.value=i.data.data,m.value=i.data.numOfCartItems}catch(i){_(i)}finally{t.value=!1}}async function f(i){if(!e.value){e.value=i;try{const h=await g.delete(`/cart/${i}`);await o()}catch(h){_(h)}finally{e.value=null}}}async function w(i,h,S){S==="plus"?r.value=i:u.value=i;try{const L=await g.put(`/cart/${i}`,{count:h});return await o(),h}catch(L){_(L)}finally{r.value=null,u.value=null}}async function I(){if(!a.value){a.value=!0;try{await g.delete("/cart"),await o()}catch(i){_(i)}finally{a.value=!1}}}function q(i){return s.value?.products.find(S=>S.product._id===i)?.count??0}function V(){y.push({name:"cart"})}return{cartItems:n,CartData:s,isLoading:t,isClearing:a,updatingPlusId:r,updatingMinusId:u,LoadingId:e,numOfCartItems:m,postCartItem:c,resetCart:d,getCartItems:o,deleteCartItems:f,updateCartItems:w,clearCart:I,getProductCount:q,goToCart:V}}),P=b("auth",()=>{const t=D(),a=p(""),r=p(""),u=p(!1),e=p(void 0),n=M(()=>!!r.value);async function s(c){a.value="",u.value=!0;try{const o=await g.post("/auth/signup",c),f=await k(c.phone),w=await k(c.password);localStorage.setItem("phone",f),localStorage.setItem("password",w),localStorage.setItem("token",o.data.token),localStorage.setItem("user",JSON.stringify(o.data.user)),e.value=o.data.user,r.value=o.data.token,t.push({name:"home"})}catch(o){o.response?.status===409&&(a.value=o.response?.data?.message||"This email is already registered.")}finally{u.value=!1}}async function m(c){a.value="",u.value=!0;try{const o=await g.post("/auth/signin",c);localStorage.setItem("token",o.data.token),localStorage.setItem("user",JSON.stringify(o.data.user)),r.value=o.data.token,e.value=o.data.user}catch(o){o.response?.status===401?a.value="This email is not registered. Please check and try again.":_(o)}finally{u.value=!1}}function y(){localStorage.getItem("token")&&(r.value=localStorage.getItem("token")),localStorage.getItem("user")&&(e.value=JSON.parse(localStorage.getItem("user")))}function d(){const c=te();r.value="",e.value=void 0,c.resetCart(),delete g.defaults.headers.token,localStorage.removeItem("token"),localStorage.removeItem("user"),t.push({name:"sign-in"})}return{status:a,token:r,isLoading:u,isloggedIn:n,user:e,registerUserValue:s,loginUserValue:m,getDataFromLocalStorage:y,logOut:d}}),ae={class:"min-h-screen bg-gray-50 dark:bg-gray-950"},re=U({__name:"App",setup(t){const a=P();return x(()=>{a.getDataFromLocalStorage()}),Z(),(r,u)=>{const e=$("router-view");return B(),j("div",ae,[F(e,{class:"pt-24"})])}}}),oe="modulepreload",ne=function(t){return"/vue-e-commerce/"+t},C={},l=function(a,r,u){let e=Promise.resolve();if(r&&r.length>0){let y=function(d){return Promise.all(d.map(c=>Promise.resolve(c).then(o=>({status:"fulfilled",value:o}),o=>({status:"rejected",reason:o}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),m=s?.nonce||s?.getAttribute("nonce");e=y(r.map(d=>{if(d=ne(d),d in C)return;C[d]=!0;const c=d.endsWith(".css"),o=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${o}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":oe,c||(f.as="script"),f.crossOrigin="",f.href=d,m&&f.setAttribute("nonce",m),document.head.appendChild(f),c)return new Promise((w,I)=>{f.addEventListener("load",w),f.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${d}`)))})}))}function n(s){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=s,window.dispatchEvent(m),!m.defaultPrevented)throw s}return e.then(s=>{for(const m of s||[])m.status==="rejected"&&n(m.reason);return a().catch(n)})},se=[{path:"/",component:()=>l(()=>import("./MainLayout-BGrg4JyG.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9])),redirect:{name:"sign-in"},children:[{path:"",name:"sign-in",component:()=>l(()=>import("./Login-Ce0p3V1h.js"),__vite__mapDeps([10,11,2,12,13,14,15,16,17,3,1,4,5,6,7,8])),meta:{requiresAuth:!1}},{path:"sign-up",name:"sign-up",component:()=>l(()=>import("./Register-DzkRSADf.js"),__vite__mapDeps([18,11,2,12,13,14,15,16,17,1,3,4,5,6,7,8])),meta:{requiresAuth:!1}},{path:"reset-password",name:"reset-password",component:()=>l(()=>import("./ResetPassword-B2EzMni4.js"),__vite__mapDeps([19,11,2,3,12,13,14,15,16,17,1,4,5,6,7,8])),meta:{requiresAuth:!1}},{path:"home",name:"home",component:()=>l(()=>import("./Home-B5llsPUj.js"),__vite__mapDeps([20,2,21,4,22,23,24,17,25,26,3,5,6,7,1,8])),meta:{requiresAuth:!0}},{path:"productDetails/:id",name:"productDetails",meta:{requiresAuth:!0},component:()=>l(()=>import("./ProductDetails-BdXvZl8a.js"),__vite__mapDeps([27,2,21,4,3,1,28,29,30,6,7,5,8,31]))},{path:"wishList",name:"wishList",meta:{requiresAuth:!0},component:()=>l(()=>import("./wishlist-Bv-6-Ddl.js"),__vite__mapDeps([32,30,4,2,6,7,1,22,23,24,17,25,26,3,5,8]))},{path:"cart",name:"cart",meta:{requiresAuth:!0},component:()=>l(()=>import("./Cart-BPCuYCat.js"),__vite__mapDeps([33,34,3,2,1,22,23,24,17,25,26,4,5,6,7,8]))},{path:"checkout",name:"checkout",meta:{requiresAuth:!0},component:()=>l(()=>import("./Checkout-CHw0JltW.js"),__vite__mapDeps([35,2,11,13,14,15,16,17,34,3,4,5,6,7,1,8]))},{path:"products",name:"products",meta:{requiresAuth:!0},component:()=>l(()=>import("./Products-DyeLkpmj.js"),__vite__mapDeps([36,2,3,4,5,6,7,1,8]))},{path:"categories",name:"categories",meta:{requiresAuth:!0},component:()=>l(()=>import("./Categories-CEl_3ell.js"),__vite__mapDeps([37,38,4,2,21,3,5,6,7,1,8]))},{path:"subCategories/:id",name:"subCategories",meta:{requiresAuth:!0},component:()=>l(()=>import("./SubCategories-Cr6WrRR9.js"),__vite__mapDeps([39,38,4,2,3,21,1,5,6,7,8]))},{path:"brands",name:"brands",meta:{requiresAuth:!0},component:()=>l(()=>import("./Brands-C8i9eV3J.js"),__vite__mapDeps([40,41,2]))}]},{path:"/allorder",name:"allorder",meta:{requiresAuth:!0},component:()=>l(()=>import("./AllOrders-BaPrvNev.js"),__vite__mapDeps([42,34,3,2,1]))},{path:"/:notFound(.*)*",name:"notfound",meta:{requiresAuth:!0},component:()=>l(()=>import("./NotFound-DUeZ5j-y.js"),__vite__mapDeps([43,1,2,41,44]))},{path:"/file-notfound",name:"file-notfound",meta:{requiresAuth:!0},component:()=>l(()=>import("./FileNotFound-rk3uqIEt.js"),__vite__mapDeps([45,1,2]))}],T=z({history:W("/vue-e-commerce/"),routes:se});T.beforeEach((t,a)=>{const r=P();if(t.meta.requiresAuth&&!r.isloggedIn)return{name:"sign-in"};if((t.name==="sign-in"||t.name==="sign-up")&&r.isloggedIn)return{name:"home"}});const A=J(re),ie=K();X();A.component("v-icon",Q);A.use(T);A.use(ie);A.mount("#app");export{l as _,te as a,v as b,he as c,Y as d,g as e,_ as f,k as h,P as u};
