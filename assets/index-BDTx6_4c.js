const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MainLayout-DucADNBU.js","assets/@vue-CDd_W0EE.js","assets/vue-router-CJ3x6OS1.js","assets/pinia-D8lMMsAB.js","assets/axios-B9ygI19o.js","assets/vue3-toastify-Cnzaq7rX.js","assets/vue3-toastify-DHXAGmwn.css","assets/oh-vue-icons-Dtfo5wcu.js","assets/vue3-carousel-itNvT18x.js","assets/vue3-carousel-Dtdw2zcG.css","assets/@vercel-DNQiN_gI.js","assets/MainLayout-D_7vufNi.css","assets/Login-BKsy6i2V.js","assets/vee-validate-DyBsQdWe.js","assets/useAuthSchema-DFRAsDxU.js","assets/yup-Cd09XHOC.js","assets/property-expr-DwgEMw67.js","assets/tiny-case-Gl8mQWqo.js","assets/toposort-Dr983J65.js","assets/colornames-BQ62I0KG.js","assets/Register-Xtltg5we.js","assets/ResetPassword-BEyP1a7-.js","assets/Home-DsyCGwY0.js","assets/products-BNh4qpIH.js","assets/SearchBar.vue_vue_type_script_setup_true_lang-DNvEoSLU.js","assets/wishlist-Cs4JKR_C.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/SearchBar-BJ-A6GWM.css","assets/categories-BdX_FRC8.js","assets/vue3-spinners-CYF-QgUe.js","assets/outdent-BxBVU389.js","assets/style-inject-BI9ztQJ7.js","assets/parse-unit-BKpLAx9Y.js","assets/just-range-CGHEN2gD.js","assets/Home-CguuL2z5.css","assets/ProductDetails-BfgjkEQk.js","assets/wishlist-D8EGkcZd.js","assets/wishlist-DCmEhTCj.css","assets/Cart-CmSrt6_m.js","assets/action-xhGrm1-p.js","assets/Cart-uy9g59eV.css","assets/Checkout-DQWJW4Zj.js","assets/Checkout-CywIGlNq.css","assets/Products-Dm2PXgeC.js","assets/Categories-_pQZSCiM.js","assets/SubCategories-BI-zIwEX.js","assets/Brands-BtbyP48A.js","assets/AllOrders-DzlmNZCv.js","assets/NotFound-G-7l1vvA.js","assets/NotFound-Bq64ms4N.css","assets/FileNotFound-CLL3YC86.js"])))=>i.map(i=>d[i]);
import{r as d,z as q,a as V,c as B,d as H,o as M,S as N,H as U,I as x,R as G,P as $}from"./@vue-CDd_W0EE.js";import{u as k,c as j,a as J}from"./vue-router-CJ3x6OS1.js";import{d as b,c as W}from"./pinia-D8lMMsAB.js";import{a as z}from"./axios-B9ygI19o.js";import{l as O}from"./vue3-toastify-Cnzaq7rX.js";import{F as K,a as Q,b as X,c as Y,d as Z,e as ee,f as te,g as ae,h as re,i as se,j as oe,k as ne,l as ue,m as ie,n as ce,o as le,p as me,q as pe,r as de,s as he,t as fe,u as ge,v as _e,w as ve,x as Fe,y as ye,z as Ee,A as Se,B as we,C as Ae,D as Pe,E as Ie,G as Le,H as Ce,I as ke,J as be,K as Oe,L as Te,M as De,N as Re,O as qe,P as Ve,Q as Be,R as He,S as Me,T as Ne,U as Ue,V as xe,W as Ge,X as $e,Y as je,Z as Je,_ as We,$ as ze,a0 as Ke,a1 as Qe,a2 as Xe,a3 as Ye,a4 as Ze,a5 as et,a6 as tt,a7 as at,a8 as rt,a9 as st,aa as ot,ab as nt,ac as ut}from"./oh-vue-icons-Dtfo5wcu.js";import"./vue3-carousel-itNvT18x.js";import{i as it}from"./@vercel-DNQiN_gI.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&i(n)}).observe(document,{childList:!0,subtree:!0});function s(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(e){if(e.ep)return;e.ep=!0;const o=s(e);fetch(e.href,o)}})();const I=localStorage.getItem("dark-mode"),v=d(I==="true"||!I&&window.matchMedia("(prefers-color-scheme: dark)").matches);function ct(){v.value=!v.value}function lt(){return document.documentElement.classList.toggle("dark",v.value),q(()=>{document.documentElement.classList.toggle("dark",v.value),localStorage.setItem("dark-mode",v.value.toString())}),{dark:v,darkMode:ct}}const mt=V([{id:"large-input",name:"name",type:"text",autocomplete:"name"},{id:"base-input",name:"email",type:"email",autocomplete:"email"},{id:"password-input",name:"password",type:"password",show:!1,autocomplete:"new-password"},{id:"rePassword-input",name:"rePassword",type:"password",show:!1,autocomplete:"new-password"},{id:"phone-input",name:"phone",type:"tel",autocomplete:"tel"}]);function Ct(){return{authData:mt}}async function L(a){const s=new TextEncoder().encode(a),i=await crypto.subtle.digest("SHA-256",s);return Array.from(new Uint8Array(i)).map(n=>n.toString(16).padStart(2,"0")).join("")}const g=z.create({baseURL:"https://ecommerce.routemisr.com/api/v1"});g.interceptors.request.use(a=>{const r=A();return!["/auth/signup","/auth/signin"].some(e=>a.url?.includes(e))&&r.token?a.headers.token=r.token:delete a.headers.token,a});function _(a){O(a.response?.data?.message||"Something went wrong")}const pt=b("cart",()=>{const a=d(!1),r=d(!1),s=d(null),i=d(null),e=d(null),o=d([]),n=d(null),m=d(0),F=k();function p(){o.value=[],n.value=null,m.value=0,a.value=!1}async function c(u){if(!e.value){e.value=u;try{const f=await g.post("/cart",{productId:u});O(f.data.message,{theme:"colored",type:"success",dangerouslyHTMLString:!0}),await t()}catch(f){_(f)}finally{e.value=null}}}async function t(){o.value.length===0&&(a.value=!0);try{const u=await g.get("/cart");o.value=u.data.data.products,n.value=u.data.data,m.value=u.data.numOfCartItems}catch(u){_(u)}finally{a.value=!1}}async function h(u){if(!e.value){e.value=u;try{const f=await g.delete(`/cart/${u}`);await t()}catch(f){_(f)}finally{e.value=null}}}async function y(u,f,w){w==="plus"?s.value=u:i.value=u;try{const P=await g.put(`/cart/${u}`,{count:f});return await t(),f}catch(P){_(P)}finally{s.value=null,i.value=null}}async function S(){if(!r.value){r.value=!0;try{await g.delete("/cart"),await t()}catch(u){_(u)}finally{r.value=!1}}}function D(u){return n.value?.products.find(w=>w.product._id===u)?.count??0}function R(){F.push({name:"cart"})}return{cartItems:o,CartData:n,isLoading:a,isClearing:r,updatingPlusId:s,updatingMinusId:i,LoadingId:e,numOfCartItems:m,postCartItem:c,resetCart:p,getCartItems:t,deleteCartItems:h,updateCartItems:y,clearCart:S,getProductCount:D,goToCart:R}}),A=b("auth",()=>{const a=k(),r=d(""),s=d(""),i=d(!1),e=d(void 0),o=B(()=>!!s.value);async function n(c){r.value="",i.value=!0;try{const t=await g.post("/auth/signup",c),h=await L(c.phone),y=await L(c.password);localStorage.setItem("phone",h),localStorage.setItem("password",y),localStorage.setItem("token",t.data.token),localStorage.setItem("user",JSON.stringify(t.data.user)),e.value=t.data.user,s.value=t.data.token,a.push({name:"home"})}catch(t){t.response?.status===409&&(r.value=t.response?.data?.message||"This email is already registered.")}finally{i.value=!1}}async function m(c){r.value="",i.value=!0;try{const t=await g.post("/auth/signin",c);localStorage.setItem("token",t.data.token),localStorage.setItem("user",JSON.stringify(t.data.user)),s.value=t.data.token,e.value=t.data.user}catch(t){t.response?.status===401?r.value="This email is not registered. Please check and try again.":_(t)}finally{i.value=!1}}function F(){localStorage.getItem("token")&&(s.value=localStorage.getItem("token")),localStorage.getItem("user")&&(e.value=JSON.parse(localStorage.getItem("user")))}function p(){const c=pt();s.value="",e.value=void 0,c.resetCart(),delete g.defaults.headers.token,localStorage.removeItem("token"),localStorage.removeItem("user"),a.push({name:"sign-in"})}return{status:r,token:s,isLoading:i,isloggedIn:o,user:e,registerUserValue:n,loginUserValue:m,getDataFromLocalStorage:F,logOut:p}}),dt={class:"min-h-screen bg-gray-50 dark:bg-gray-950"},ht=H({__name:"App",setup(a){const r=A();return M(()=>{r.getDataFromLocalStorage()}),lt(),(s,i)=>{const e=N("router-view");return x(),U("div",dt,[G(e,{class:"pt-24"})])}}}),ft="modulepreload",gt=function(a){return"/vue-e-commerce/"+a},C={},l=function(r,s,i){let e=Promise.resolve();if(s&&s.length>0){let F=function(p){return Promise.all(p.map(c=>Promise.resolve(c).then(t=>({status:"fulfilled",value:t}),t=>({status:"rejected",reason:t}))))};document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),m=n?.nonce||n?.getAttribute("nonce");e=F(s.map(p=>{if(p=gt(p),p in C)return;C[p]=!0;const c=p.endsWith(".css"),t=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${t}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":ft,c||(h.as="script"),h.crossOrigin="",h.href=p,m&&h.setAttribute("nonce",m),document.head.appendChild(h),c)return new Promise((y,S)=>{h.addEventListener("load",y),h.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${p}`)))})}))}function o(n){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=n,window.dispatchEvent(m),!m.defaultPrevented)throw n}return e.then(n=>{for(const m of n||[])m.status==="rejected"&&o(m.reason);return r().catch(o)})},_t=[{path:"/",component:()=>l(()=>import("./MainLayout-DucADNBU.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11])),redirect:{name:"sign-in"},children:[{path:"",name:"sign-in",component:()=>l(()=>import("./Login-BKsy6i2V.js"),__vite__mapDeps([12,13,1,14,15,16,17,18,19,2,3,4,5,6,7,8,9,10])),meta:{requiresAuth:!1}},{path:"sign-up",name:"sign-up",component:()=>l(()=>import("./Register-Xtltg5we.js"),__vite__mapDeps([20,13,1,14,15,16,17,18,19,2,3,4,5,6,7,8,9,10])),meta:{requiresAuth:!1}},{path:"reset-password",name:"reset-password",component:()=>l(()=>import("./ResetPassword-BEyP1a7-.js"),__vite__mapDeps([21,13,1,2,14,15,16,17,18,19,3,4,5,6,7,8,9,10])),meta:{requiresAuth:!1}},{path:"home",name:"home",component:()=>l(()=>import("./Home-DsyCGwY0.js"),__vite__mapDeps([22,1,23,3,24,25,5,6,2,26,13,27,28,8,9,29,30,31,19,32,33,4,7,10,34])),meta:{requiresAuth:!0}},{path:"productDetails/:id",name:"productDetails",meta:{requiresAuth:!0},component:()=>l(()=>import("./ProductDetails-BfgjkEQk.js"),__vite__mapDeps([35,1,23,3,2,8,9,25,5,6,4,7,10,34]))},{path:"wishList",name:"wishList",meta:{requiresAuth:!0},component:()=>l(()=>import("./wishlist-D8EGkcZd.js"),__vite__mapDeps([36,25,3,1,5,6,29,30,31,19,32,33,26,2,4,7,8,9,10,37]))},{path:"cart",name:"cart",meta:{requiresAuth:!0},component:()=>l(()=>import("./Cart-CmSrt6_m.js"),__vite__mapDeps([38,39,2,1,29,30,31,19,32,33,26,3,4,5,6,7,8,9,10,40]))},{path:"checkout",name:"checkout",meta:{requiresAuth:!0},component:()=>l(()=>import("./Checkout-DQWJW4Zj.js"),__vite__mapDeps([41,1,13,15,16,17,18,19,39,2,26,3,4,5,6,7,8,9,10,42]))},{path:"products",name:"products",meta:{requiresAuth:!0},component:()=>l(()=>import("./Products-Dm2PXgeC.js"),__vite__mapDeps([43,24,1,23,3,25,5,6,2,26,13,27,4,7,8,9,10]))},{path:"categories",name:"categories",meta:{requiresAuth:!0},component:()=>l(()=>import("./Categories-_pQZSCiM.js"),__vite__mapDeps([44,28,3,1,23,2,4,5,6,7,8,9,10]))},{path:"subCategories/:id",name:"subCategories",meta:{requiresAuth:!0},component:()=>l(()=>import("./SubCategories-BI-zIwEX.js"),__vite__mapDeps([45,28,3,1,2,23,4,5,6,7,8,9,10]))},{path:"brands",name:"brands",meta:{requiresAuth:!0},component:()=>l(()=>import("./Brands-BtbyP48A.js"),__vite__mapDeps([46,26,1]))}]},{path:"/allorder",name:"allorder",meta:{requiresAuth:!0},component:()=>l(()=>import("./AllOrders-DzlmNZCv.js"),__vite__mapDeps([47,39,2,1]))},{path:"/:notFound(.*)*",name:"notfound",meta:{requiresAuth:!0},component:()=>l(()=>import("./NotFound-G-7l1vvA.js"),__vite__mapDeps([48,26,1,49]))},{path:"/file-notfound",name:"file-notfound",meta:{requiresAuth:!0},component:()=>l(()=>import("./FileNotFound-CLL3YC86.js"),__vite__mapDeps([50,26,1]))}],T=j({history:J("/vue-e-commerce/"),routes:_t});T.beforeEach((a,r)=>{const s=A();if(a.meta.requiresAuth&&!s.isloggedIn)return{name:"sign-in"};if((a.name==="sign-in"||a.name==="sign-up")&&s.isloggedIn)return{name:"home"}});const vt=[K,Q,X,Y,Z,ee,te,ae,re,se,oe,ne,ue,ie,ce,le,me,pe,de,he,fe,ge,_e,ve,Fe,ye,Ee,Se,we,Ae,Pe,Ie,Le,Ce,ke,be,Oe,Te,De,Re,qe,Ve,Be,He,Me,Ne,Ue,xe,Ge,$e,je,Je,We,ze,Ke,Qe,Xe,Ye,Ze,et,tt,at,rt,st,ot],E=$(ht),Ft=W();it();nt(...vt);E.component("v-icon",ut);E.use(T);E.use(Ft);E.mount("#app");export{pt as a,v as b,Ct as c,ct as d,g as e,_ as f,L as h,A as u};
