const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MainLayout-y6qdT1P8.js","assets/@vue-CDd_W0EE.js","assets/vue-router-CJ3x6OS1.js","assets/pinia-D8lMMsAB.js","assets/axios-B9ygI19o.js","assets/vue3-toastify-Cnzaq7rX.js","assets/vue3-toastify-DHXAGmwn.css","assets/oh-vue-icons-5GCpCTe6.js","assets/vue3-carousel-itNvT18x.js","assets/vue3-carousel-Dtdw2zcG.css","assets/@vercel-DNQiN_gI.js","assets/MainLayout-D_7vufNi.css","assets/Login-BHeKIW01.js","assets/vee-validate-DyBsQdWe.js","assets/useAuthSchema-Cj-VZTbC.js","assets/yup-Cd09XHOC.js","assets/property-expr-DwgEMw67.js","assets/tiny-case-Gl8mQWqo.js","assets/toposort-Dr983J65.js","assets/colornames-BQ62I0KG.js","assets/Register-CmYeYySV.js","assets/ResetPassword-QSL3Fm9V.js","assets/Home-CU3-9A0K.js","assets/products-C-_WACfy.js","assets/SearchBar.vue_vue_type_script_setup_true_lang-Cw8_X1Ox.js","assets/wishlist-GbUer_Tc.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/SearchBar-D_L19pVW.css","assets/vue3-spinners-CYF-QgUe.js","assets/outdent-BxBVU389.js","assets/style-inject-BI9ztQJ7.js","assets/parse-unit-BKpLAx9Y.js","assets/just-range-CGHEN2gD.js","assets/Home-CguuL2z5.css","assets/ProductDetails-DROoQvTd.js","assets/wishlist-BfY8CGda.js","assets/wishlist-DCmEhTCj.css","assets/Cart-CMbGlFrv.js","assets/action-xhGrm1-p.js","assets/Cart-uy9g59eV.css","assets/Checkout-B43Icwpc.js","assets/Checkout-CywIGlNq.css","assets/Products-BREJFSVv.js","assets/Categories-CIDH6upk.js","assets/CategorieCard-CNB2iWrT.js","assets/Brands-BtbyP48A.js","assets/AllOrders-DzlmNZCv.js","assets/NotFound-G-7l1vvA.js","assets/NotFound-Bq64ms4N.css","assets/FileNotFound-CLL3YC86.js"])))=>i.map(i=>d[i]);
import{r as p,z as V,a as F,c as N,d as H,o as M,S as x,H as U,I as j,R as B,P as $}from"./@vue-CDd_W0EE.js";import{u as D,c as J,a as W}from"./vue-router-CJ3x6OS1.js";import{d as R,c as z}from"./pinia-D8lMMsAB.js";import{a as G}from"./axios-B9ygI19o.js";import{l as T}from"./vue3-toastify-Cnzaq7rX.js";import{c as K,g as Q,F as X,a as Y,b as Z,d as ee,e as te,f as ae,h as re,i as oe,j as ne,k as se}from"./oh-vue-icons-5GCpCTe6.js";import"./vue3-carousel-itNvT18x.js";import{i as ue}from"./@vercel-DNQiN_gI.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function o(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(e){if(e.ep)return;e.ep=!0;const n=o(e);fetch(e.href,n)}})();const L=localStorage.getItem("dark-mode"),v=p(L==="true"||!L&&window.matchMedia("(prefers-color-scheme: dark)").matches);function ie(){v.value=!v.value}function ce(){return document.documentElement.classList.toggle("dark",v.value),V(()=>{document.documentElement.classList.toggle("dark",v.value),localStorage.setItem("dark-mode",v.value.toString())}),{dark:v,darkMode:ie}}const le=F([{id:"large-input",name:"name",type:"text",autocomplete:"name"},{id:"base-input",name:"email",type:"email",autocomplete:"email"},{id:"password-input",name:"password",type:"password",show:!1,autocomplete:"new-password"},{id:"rePassword-input",name:"rePassword",type:"password",show:!1,autocomplete:"new-password"},{id:"phone-input",name:"phone",type:"tel",autocomplete:"tel"}]);function Le(){return{authData:le}}async function k(a){const o=new TextEncoder().encode(a),i=await crypto.subtle.digest("SHA-256",o);return Array.from(new Uint8Array(i)).map(s=>s.toString(16).padStart(2,"0")).join("")}const g=G.create({baseURL:"https://ecommerce.routemisr.com/api/v1"});g.interceptors.request.use(a=>{const r=I();return!["/auth/signup","/auth/signin"].some(e=>a.url?.includes(e))&&r.token?a.headers.token=r.token:delete a.headers.token,a});function _(a){T(a.response?.data?.message||"Something went wrong")}const me=R("cart",()=>{const a=p(!1),r=p(!1),o=p(null),i=p(null),e=p(null),n=p([]),s=p(null),m=p(0),y=D();function d(){n.value=[],s.value=null,m.value=0,a.value=!1}async function c(u){if(!e.value){e.value=u;try{const f=await g.post("/cart",{productId:u});T(f.data.message,{theme:"colored",type:"success",dangerouslyHTMLString:!0}),await t()}catch(f){_(f)}finally{e.value=null}}}async function t(){n.value.length===0&&(a.value=!0);try{const u=await g.get("/cart");n.value=u.data.data.products,s.value=u.data.data,m.value=u.data.numOfCartItems}catch(u){_(u)}finally{a.value=!1}}async function h(u){if(!e.value){e.value=u;try{const f=await g.delete(`/cart/${u}`);await t()}catch(f){_(f)}finally{e.value=null}}}async function E(u,f,S){S==="plus"?o.value=u:i.value=u;try{const P=await g.put(`/cart/${u}`,{count:f});return await t(),f}catch(P){_(P)}finally{o.value=null,i.value=null}}async function A(){if(!r.value){r.value=!0;try{await g.delete("/cart"),await t()}catch(u){_(u)}finally{r.value=!1}}}function C(u){return s.value?.products.find(S=>S.product._id===u)?.count??0}function q(){y.push({name:"cart"})}return{cartItems:n,CartData:s,isLoading:a,isClearing:r,updatingPlusId:o,updatingMinusId:i,LoadingId:e,numOfCartItems:m,postCartItem:c,resetCart:d,getCartItems:t,deleteCartItems:h,updateCartItems:E,clearCart:A,getProductCount:C,goToCart:q}}),I=R("auth",()=>{const a=D(),r=p(""),o=p(""),i=p(!1),e=p(void 0),n=N(()=>!!o.value);async function s(c){r.value="",i.value=!0;try{const t=await g.post("/auth/signup",c),h=await k(c.phone),E=await k(c.password);localStorage.setItem("phone",h),localStorage.setItem("password",E),localStorage.setItem("token",t.data.token),localStorage.setItem("user",JSON.stringify(t.data.user)),e.value=t.data.user,o.value=t.data.token,a.push({name:"home"})}catch(t){t.response?.status===409&&(r.value=t.response?.data?.message||"This email is already registered.")}finally{i.value=!1}}async function m(c){r.value="",i.value=!0;try{const t=await g.post("/auth/signin",c);localStorage.setItem("token",t.data.token),localStorage.setItem("user",JSON.stringify(t.data.user)),o.value=t.data.token,e.value=t.data.user}catch(t){t.response?.status===401?r.value="This email is not registered. Please check and try again.":_(t)}finally{i.value=!1}}function y(){localStorage.getItem("token")&&(o.value=localStorage.getItem("token")),localStorage.getItem("user")&&(e.value=JSON.parse(localStorage.getItem("user")))}function d(){const c=me();o.value="",e.value=void 0,c.resetCart(),delete g.defaults.headers.token,localStorage.removeItem("token"),localStorage.removeItem("user"),a.push({name:"sign-in"})}return{status:r,token:o,isLoading:i,isloggedIn:n,user:e,registerUserValue:s,loginUserValue:m,getDataFromLocalStorage:y,logOut:d}}),de={class:"min-h-screen bg-gray-50 dark:bg-gray-950"},pe=H({__name:"App",setup(a){const r=I();return M(()=>{r.getDataFromLocalStorage()}),ce(),(o,i)=>{const e=x("router-view");return j(),U("div",de,[B(e,{class:"pt-24"})])}}}),he="modulepreload",fe=function(a){return"/vue-e-commerce/"+a},O={},l=function(r,o,i){let e=Promise.resolve();if(o&&o.length>0){let y=function(d){return Promise.all(d.map(c=>Promise.resolve(c).then(t=>({status:"fulfilled",value:t}),t=>({status:"rejected",reason:t}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),m=s?.nonce||s?.getAttribute("nonce");e=y(o.map(d=>{if(d=fe(d),d in O)return;O[d]=!0;const c=d.endsWith(".css"),t=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${t}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":he,c||(h.as="script"),h.crossOrigin="",h.href=d,m&&h.setAttribute("nonce",m),document.head.appendChild(h),c)return new Promise((E,A)=>{h.addEventListener("load",E),h.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${d}`)))})}))}function n(s){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=s,window.dispatchEvent(m),!m.defaultPrevented)throw s}return e.then(s=>{for(const m of s||[])m.status==="rejected"&&n(m.reason);return r().catch(n)})},ge=[{path:"/",component:()=>l(()=>import("./MainLayout-y6qdT1P8.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11])),redirect:{name:"sign-in"},children:[{path:"",name:"sign-in",component:()=>l(()=>import("./Login-BHeKIW01.js"),__vite__mapDeps([12,13,1,14,15,16,17,18,19,2,3,4,5,6,7,8,9,10])),meta:{requiresAuth:!1}},{path:"sign-up",name:"sign-up",component:()=>l(()=>import("./Register-CmYeYySV.js"),__vite__mapDeps([20,13,1,14,15,16,17,18,19,2,3,4,5,6,7,8,9,10])),meta:{requiresAuth:!1}},{path:"reset-password",name:"reset-password",component:()=>l(()=>import("./ResetPassword-QSL3Fm9V.js"),__vite__mapDeps([21,13,1,2,14,15,16,17,18,19,3,4,5,6,7,8,9,10])),meta:{requiresAuth:!1}},{path:"home",name:"home",component:()=>l(()=>import("./Home-CU3-9A0K.js"),__vite__mapDeps([22,1,23,3,24,25,5,6,2,26,13,27,8,9,28,29,30,19,31,32,4,7,10,33])),meta:{requiresAuth:!0}},{path:"productDetails/:id",name:"productDetails",meta:{requiresAuth:!0},component:()=>l(()=>import("./ProductDetails-DROoQvTd.js"),__vite__mapDeps([34,1,23,3,2,8,9,25,5,6,4,7,10,33]))},{path:"wishList",name:"wishList",meta:{requiresAuth:!0},component:()=>l(()=>import("./wishlist-BfY8CGda.js"),__vite__mapDeps([35,25,3,1,5,6,28,29,30,19,31,32,26,2,4,7,8,9,10,36]))},{path:"cart",name:"cart",meta:{requiresAuth:!0},component:()=>l(()=>import("./Cart-CMbGlFrv.js"),__vite__mapDeps([37,38,2,1,28,29,30,19,31,32,26,3,4,5,6,7,8,9,10,39]))},{path:"checkout",name:"checkout",meta:{requiresAuth:!0},component:()=>l(()=>import("./Checkout-B43Icwpc.js"),__vite__mapDeps([40,1,13,15,16,17,18,19,38,2,26,3,4,5,6,7,8,9,10,41]))},{path:"products",name:"products",meta:{requiresAuth:!0},component:()=>l(()=>import("./Products-BREJFSVv.js"),__vite__mapDeps([42,24,1,23,3,25,5,6,2,26,13,27,4,7,8,9,10]))},{path:"categories",name:"categories",meta:{requiresAuth:!0},component:()=>l(()=>import("./Categories-CIDH6upk.js"),__vite__mapDeps([43,26,1])),children:[{path:"categoriecard",name:"categoriecard",meta:{requiresAuth:!0},component:()=>l(()=>import("./CategorieCard-CNB2iWrT.js"),__vite__mapDeps([44,26,1]))}]},{path:"brands",name:"brands",meta:{requiresAuth:!0},component:()=>l(()=>import("./Brands-BtbyP48A.js"),__vite__mapDeps([45,26,1]))}]},{path:"/allorder",name:"allorder",meta:{requiresAuth:!0},component:()=>l(()=>import("./AllOrders-DzlmNZCv.js"),__vite__mapDeps([46,38,2,1]))},{path:"/:notFound(.*)*",name:"notfound",meta:{requiresAuth:!0},component:()=>l(()=>import("./NotFound-G-7l1vvA.js"),__vite__mapDeps([47,26,1,48]))},{path:"/file-notfound",name:"file-notfound",meta:{requiresAuth:!0},component:()=>l(()=>import("./FileNotFound-CLL3YC86.js"),__vite__mapDeps([49,26,1]))}],b=J({history:W("/vue-e-commerce/"),routes:ge});b.beforeEach((a,r)=>{const o=I();if(a.meta.requiresAuth&&!o.isloggedIn)return{name:"sign-in"};if((a.name==="sign-in"||a.name==="sign-up")&&o.isloggedIn)return{name:"home"}});const w=$(pe),_e=z();ue();K(se,ne,oe,re,ae,te,ee,Z,Y,X);w.component("v-icon",Q);w.use(b);w.use(_e);w.mount("#app");export{me as a,v as b,Le as c,ie as d,g as e,_ as f,k as h,I as u};
